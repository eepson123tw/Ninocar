<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="./assets/css/pages/factory.css">
<link rel="stylesheet" href="./assets/css/all.css">
<link rel="shortcut icon" href="./assets/img/loho-icon.ico" />
<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js' integrity='sha512-YXLGLsQBiwHPHLCAA9npZWhADUsHECjkZ71D1uzT2Hpop82/eLnmFb6b0jo8pK4T0Au0g2FETrRJNblF/46ZzQ==' crossorigin='anonymous'></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/3.6.2/vuex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script src="./assets/js/all.js"></script>
<script src="./assets/js/utils.js"></script>
<title>Factory</title>
</head>

<body>
  <div id="factory" ref="memInfo">
    <vue-header></vue-header>
    <div class="container containerMain">
      <report-modal></report-modal>
      <report-success-modal></report-success-modal>
      <work-modal ref="workInfoF"></work-modal>

      <div class="intro">
        <div class="intro_pic col-7 col-lg-4 col-sm-3">
          <img src="./assets/img/pic/model.png" class="model">
          <div class="lable">
            <p class="h4">NT$</p>
            <h2 class="emphasis">300</h2>
            <p class="h4">起</p>
          </div>
        </div>
        <div class="intro_content col-5 col-lg-2 col-sm-4">
          <h2 class="emphasis intro_content_title">打造自己的車</h2>
          <p class="h3 intro_content_text">在車車工廠，<br> 我們提供各種車款、烤漆顏色和不同配備，
            <br> 您可以盡情揮灑創意，創作屬於自己的超酷客製車。
          </p>
          <button class="btn make" @click="make">開始製作</button>
        </div>
      </div>

      <!-- 製作車子的區域 -->
      <div class="makeCar col-12 col-lg-6 col-sm-4">
        <div class="mainArea">
          <canvas id="canvas" class="mainAreaPic canvas" width="400" height="200"></canvas>
          <canvas id="canvas" class="accessoryPic1 canvasA1" width="400" height="200"></canvas>
          <canvas id="canvas" class="accessoryPic2 canvasA2" width="400" height="200"></canvas>
          <canvas id="canvas" class="accessoryPic3 canvasA3" width="400" height="200"></canvas>
        </div>
        <div id="progressBar" class="progressBar">

          
  <div class="bar bar-back"></div>
  <div class="bar bar-front"></div>
  <ul class="explanations">
    <li class="content">
      <div class="circle circle--able" @click="getCircleIndex">1</div>
      <p class="explanation">選擇車型</p>
    </li>
    <li class="content">
      <div class="circle" @click="getCircleIndex">2</div>
      <p class="explanation">顏色烤漆</p>
    </li>
    <li class="content">
      <div class="circle" @click="getCircleIndex">3</div>
      <p class="explanation">配裝輪胎</p>
    </li>
    <li class="content">
      <div class="circle" @click="getCircleIndex">4</div>
      <p class="explanation">配備零件<br>(可複選)</p>
    </li>
    <li class="content">
      <div class="circle" @click="getCircleIndex">5</div>
      <p class="explanation">完成</p>
    </li>
  </ul>
        </div>


        <div class="selectAreaOut">
          <div class="selectBtn">
            <div class="selectAreaOut-previous" @click="moveLeft"><img src="./assets/img/icon/icon-left.svg" alt=""></div>
            <div class="selectAreaOut-next" @click="moveRight"><img src="./assets/img/icon/icon-right.svg" alt=""></div>
          </div>

          <ul class="selectArea col-12 col-lg-6 col-sm-4" style="left: 0px;">
            <!-- 車型 -->
            <div class="shapeCards">
              <li class="shapeCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/shape01.png" class="shape">
                </div>

                <p class="makeCar-name">Audi R8小客車</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectShape">選擇此車型</button>
              </li>

              <li class="shapeCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/shape02.png" class="shape">
                </div>
                <p class="makeCar-name">Audi R8小客車</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectShape">選擇此車型</button>
              </li>

              <li class="shapeCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/shape03.png" class="shape">
                </div>
                <p class="makeCar-name">Audi R8小客車</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectShape">選擇此車型</button>
              </li>

              <li class="shapeCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/shape03.png" class="shape">
                </div>
                <p class="makeCar-name">Audi R8小客車</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectShape">選擇此車型</button>
              </li>
            </div>

            <!-- 顏色 -->
            <div class="colorCards">
              <li class="colorCard col-3 col-lg-2 col-sm-3">
                <div class="color">
                  <div class="white"></div>
                </div>
                <p class="makeCar-name">白</p>
                <p class="makeCar-price">NT$ 50</p>
                <button class="btn btn--fluid btn--outline selectColor selectWhite">選擇烤漆</button>
              </li>

              <li class="colorCard col-3 col-lg-2 col-sm-3">
                <div class="color">
                  <div class="red"></div>
                </div>
                <p class="makeCar-name">紅</p>
                <p class="makeCar-price">NT$ 50</p>
                <button class="btn btn--fluid btn--outline selectColor selectRed">選擇此烤漆</button>
              </li>

              <li class="colorCard col-3 col-lg-2 col-sm-3">
                <div class="color ">
                  <div class="orange"></div>
                </div>
                <p class="makeCar-name">橙</p>
                <p class="makeCar-price">NT$ 50</p>
                <button class="btn btn--fluid btn--outline selectColor selectOrange">選擇此烤漆</button>
              </li>

              <li class="colorCard col-3 col-lg-2 col-sm-3">
                <div class="color ">
                  <div class="yellow"></div>
                </div>
                <p class="makeCar-name">黃</p>
                <p class="makeCar-price">NT$ 70</p>
                <button class="btn btn--fluid btn--outline selectColor selectYellow">選擇此烤漆</button>
              </li>

              <li class="colorCard col-3 col-lg-2 col-sm-3">
                <div class="color ">
                  <div class="purple"></div>
                </div>
                <p class="makeCar-name">紫</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectColor selectPurple">選擇此烤漆</button>
              </li>
            </div>


            <!-- 輪子 -->
            <div class="tireCards">
              <li class="tireCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/tire01.png" class="tire">
                </div>
                <p class="makeCar-name">酷炫款輪子</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectTire selectT1">選擇此車輪</button>
              </li>

              <li class="tireCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/tire02.png" class="tire">
                </div>
                <p class="makeCar-name">懷舊款輪子</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectTire selectT2">選擇此車輪</button>
              </li>

              <li class="tireCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/tire03.png" class="tire">
                </div>
                <p class="makeCar-name">經典款輪子</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectTire selectT3">選擇此車輪</button>
              </li>

              <li class="tireCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/tire04.png" class="tire">
                </div>
                <p class="makeCar-name">時尚款輪子</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectTire selectT4">選擇此車輪</button>
              </li>
            </div>


            <!-- 配件 -->
            <div class="accessoryCards">
              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory1.png" class="accessory">
                </div>
                <p class="makeCar-name">圓形燈飾</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory  selectA1">新增此配件</button>
              </li>

              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory2.png" class="accessory">
                </div>
                <p class="makeCar-name">方形藍色燈飾</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory selectA2">新增此配件</button>
              </li>

              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory3.png" class="accessory">
                </div>
                <p class="makeCar-name">紅藍色燈飾</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory selectA3">新增此配件</button>
              </li>

              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory4.png" class="accessory">
                </div>
                <p class="makeCar-name">可愛動物車貼</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory selectA4">新增此配件</button>
              </li>

              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory5.png" class="accessory">
                </div>
                <p class="makeCar-name">雙馬車貼</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory selectA5">新增此配件</button>
              </li>

              <li class="accessoryCard col-3 col-lg-2 col-sm-3">
                <div class="cardOut">
                  <img src="./assets/img/pic/accessory6.png" class="accessory">
                </div>
                <p class="makeCar-name">白色尾翼</p>
                <p class="makeCar-price">NT$ 100</p>
                <button class="btn btn--fluid btn--outline selectAccessory selectA6">新增此配件</button>
              </li>
            </div>
          </ul>
        </div>

        <div class="tipArea">
          <div class="tipArea_left col-6 col-sm-4">
            <button class="btn btn--outline previousStep invisible" @click="toPreviousStep"><img
                src="./assets/img/icon/icon-double-left.svg"
                class="icon"
              >上一步</button>
          </div>
          <div class="tipArea_right col-6 col-sm-4">
            <div class="tipPrice">
              <p class="h4">總金額</p>
              <p class="totalPrice">NT$ 0</p>
            </div>
            <div class="pleaseSelect">請先選擇車款才能進行下一步喔</div>
            <button class="btn btn--disabled nextStep" @click="toNextStep">下一步</button>
          </div>
        </div>


        <form class="giveName">
          <div class="giveName_left">
            <p class="description">幫您的作品取個名字</p>
            <input type="text" class="typeWorkName" name="workName">
            <div class="nameTip">
              <p>餘20字</p>
              <button type="button" class="btn btn--link randomName h5">隨機取名</button>
            </div>

            <input type="checkbox" name="" value="">公開此作品

            <p class="description">使用者暱稱</p>
            <input type="text" class="typeNickName" name="userNickName" value="一位不知名的旅人">
            <p class="notice">使用者暱稱將會被引用於網站相關留言及連結</p>
          </div>
          <div class="giveName_right">
            <p class="description">描述您的創作靈感</p>
            <!-- <textarea name="" id="" cols="50" rows="10" placeholder="這是我的第一個作品" class="typeInspiration" name="inspiration"></textarea> -->
            <textarea name="" id="" cols="50" rows="10" class="typeInspiration" name="inspiration"></textarea>
            <p>餘100字</p>

            <input type="hidden" class="putDataId" name="workPostTime" value="">
            <input type="hidden" class="putPrice" name="workPrice" value="">
            <input type="hidden" class="putAllIndex" name="allIndex" value="">
            <input type="hidden" class="putImgPath" name="imgPath" value="">
            <input type="hidden" class="putMemberId" name="memberId" value="">
          </div>
        </form>
      </div>

      <div class="workBar col-12 col-lg-6 col-sm-4">
        <div class="workBar_left">
          <button class="workButton h2 works" @click="showWorks">大家的作品</button>
          <button class="workButton h2 myworks" @click="showMywork">我的作品</button>
        </div>
        <div class="workBar_right">
          <p class="h4 mr-4">排序</p>
          <select name="" id="" class="filter h4">
            <option class="goodFirst">按讚數多到少</option>
            <option class="newFirst">按作品新到舊</option>
            <option class="OldFirst">按作品舊到新</option>
          </select>
        </div>

      </div>

      <div>
        <ul class="othersWorks grid">
          <work-card ref="workInfo1" @report-emit="openReportModal" :img="'./assets/img/pic/model01.png'" :good-num="24" :work-title="'白帥帥'" :post-time="15" value="450" :work-total-price="450" data-id="220203" data-board-id="1614917124264"></work-card>
          <work-card2 ref="workInfo2" @report-emit="openReportModal" value="370" :work-total-price="370" data-id="22310" data-board-id="1614917124274"></work-card2>
          <work-card ref="workInfo3" :img="'./assets/img/pic/model02.png'" :good-num="15" :work-title="'賣紫薯的車'" value="500" :work-total-price="500" data-id="55555" data-board-id="1614917124284"></work-card>
          <work-card ref="workInfo4" :img="'./assets/img/pic/model03.png'" :good-num="13" :work-title="'西瓜轎車'" :post-time="7" data-price="350" :work-total-price="350" data-id="22111" data-board-id="1614917124294"></work-card>
          <work-card ref="workInfo5" :img="'./assets/img/pic/model04.png'" :good-num="5" :work-title="'賣橘子的車'" data-price="350" :work-total-price="350" data-id="112303" data-board-id="1614917124299"></work-card>
          <work-card ref="workInfo6" :img="'./assets/img/pic/model05.png'" :work-title="'賣地瓜的車'" :post-time="26" data-price="500" :work-total-price="500" data-id="0033345" data-board-id="1615519588220"></work-card>

          <!-- ajax -->
        </ul>

        <div class="mywork" id="mywork">
          <empty-state></empty-state>
        </div>
      </div>
    </div>
    <footer class="footer">
    <div class="container">
        <ul class="row py-10">
            <li class="col-3 col-lg-3 col-sm-4 mb-sm-4">
                <h4 class="footer__title">商品相關</h4>
                <nav>
            <li><a href="#" class="link w-100 py-2 px-sm-10">商品一覽</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">本月主打</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">車車工廠</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">車車圖鑑</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">退貨機制</a></li>
            </nav>
            </li>
            <li class="col-3 col-lg-3 col-sm-4 mb-sm-4">
                <h4 class="footer__title">會員權益</h4>
                <nav>
            <li><a href="#" class="link w-100 py-2 px-sm-10">會員Q&A</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">訊息公告</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">會員機制說明</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">隱私權政策</a></li>
            <li><a href="./policy.html" class="link w-100 py-2 px-sm-10">服務條款</a></li>
            </nav>
            </li>
            <li class="col-3 col-lg-3 col-sm-4 mb-sm-4">
                <h4 class="footer__title">關於Nino</h4>
                <nav>
            <li><a href="#" class="link w-100 py-2 px-sm-10">關於我們</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">合作夥伴</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">工作機會</a></li>
            <li><a href="#" class="link w-100 py-2 px-sm-10">媒體報導</a></li>
            </nav>
            </li>
            <li class="col-3 col-lg-3 col-sm-4">
                <h4 class="footer__title">聯絡我們</h4>
                <nav class="d-flex">
                    <img src="./assets/img/icon/icon-fb.svg" class="link icon">
                    <img src="./assets/img/icon/icon-ig.svg" class="link icon ml-5">
                </nav>
            </li>
        </ul>
        <div class="copyright">
            Copyright &copy; 2021 nino car
        </div>
</footer>
    
  </div>


  <div id="factoryModal">
    


  </div>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

<script>
  Vue.component('vue-header', {
    template: `
        <header class="header">
        <div class="container d-flex justify-content-between align-items-center po-re py-2">
            <div class="d-flex align-items-center">
                <a href="./index.html" class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="160" height="30" viewBox="0 0 160 30">
                        <g  transform="translate(-2903 -1670)">
                            <path d="M70.215,346.391c0,1.045.156,2.2-.3,2.786-.422.585-1.292.446-2.558.446s-2.068.139-2.49-.446c-.454-.591-.364-1.74-.364-2.786V330.422c0-1.4,1-2.284,3.178-2.284a4.18,4.18,0,0,1,3.892,1.958l7.2,9.927v-8.653c0-1.046-.112-2.2.342-2.785.419-.585,1.248-.447,2.511-.447s2.024-.139,2.446.447a5.163,5.163,0,0,1,.41,2.785v16c0,1.566-1.006,2.35-2.758,2.35a3.937,3.937,0,0,1-3.5-1.862l-8.01-10.545Z" transform="translate(2842.501 1345.877)" fill="#3f1b0f"/>
                            <path  d="M112.247,344.522a6.062,6.062,0,0,0,2.272-.457,10.145,10.145,0,0,1,2.745-.943c1.525,0,1.828,2.021,1.828,3.2,0,.912.022,1.472-1.017,2.093a14.035,14.035,0,0,1-6.12,1.5c-6.066,0-10.574-4.146-10.574-10.9,0-7.25,5.157-10.942,10.737-10.942a13.91,13.91,0,0,1,5.936,1.213c1.1.651,1.039,1.5,1.039,2.381,0,1.143-.228,2.972-1.85,2.972a9.713,9.713,0,0,1-2.918-.72,6.184,6.184,0,0,0-2.272-.457c-2.564,0-4.7,1.8-4.7,5.489C107.35,342.826,109.751,344.522,112.247,344.522Z" transform="translate(2897.619 1345.936)" fill="#512616"/>
                            <path  d="M122.969,345.248h-7.234l-.941,2.372c-.681,1.892-1.136,2-3.178,2-1.85,0-2.652-.452-2.652-1.5a5.037,5.037,0,0,1,.478-1.639l6.618-15.806c.682-1.666,1.46-2.546,3.535-2.546,2.109,0,2.791.912,3.44,2.546l6.388,15.839a5.8,5.8,0,0,1,.352,1.566c0,1.174-.969,1.536-2.816,1.536-1.947,0-2.266.229-3.013-1.794Zm-5.612-4.506h4.021l-2.012-5.487Z" transform="translate(2910.036 1346.06)" fill="#3f1b0f"/>
                            <path  d="M123.64,346.432a5.09,5.09,0,0,1-.418,2.684c-.422.585-1.14.548-2.373.548s-1.941.038-2.363-.548a5.084,5.084,0,0,1-.426-2.684v-14.6c0-1.176,0-2.581,2.077-3.235a15.671,15.671,0,0,1,4.508-.487,13.065,13.065,0,0,1,5.579.977,5.962,5.962,0,0,1,3.567,5.781,6.363,6.363,0,0,1-3.31,5.846l3.824,5.1,1.091,1.4c1.036,1.4-.047,2.448-2.838,2.448-2.142,0-2.675-.39-3.681-1.923l-2.515-3.923c-.581-.915-1.036-1.794-1.036-1.794H123.64Zm0-8.915s.454.033.906.033c2.4,0,3.343-.948,3.343-2.353,0-1.634-1.266-2.154-2.951-2.154a9,9,0,0,0-1.3.1Z" transform="translate(2924.037 1346.019)" fill="#3f1b0f"/>
                            <g class="logo__child">
                                <path d="M79.843,341.791c0,.554-.059.947-.5,1.152a5.991,5.991,0,0,1-2.464.281c-1.441,0-1.988-.024-2.488-.336s-.506-.8-.506-1.349l-.281-6.326c0-2.74,1.4-3.408,3.275-3.408,1.763,0,3.272.449,3.272,3.508Z" transform="translate(2857.399 1352.276)" fill="#3f1b0f"/>
                                <path  d="M3.014,6.028A3.014,3.014,0,1,1,6.028,3.014,3.018,3.018,0,0,1,3.014,6.028ZM3,3.808c-.763,0-1.133.126-1.133.387a.83.83,0,0,0,.384.547A1.335,1.335,0,0,0,3,5.036a1.335,1.335,0,0,0,.749-.294.83.83,0,0,0,.384-.547C4.13,3.935,3.76,3.808,3,3.808Z" transform="translate(2931.234 1677.165)" fill="#3f1b0f" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1"/>
                            </g>
                            <path  d="M70.215,346.391c0,1.045.156,2.2-.3,2.786-.422.585-1.292.446-2.558.446s-2.068.139-2.49-.446c-.454-.591-.364-1.74-.364-2.786V330.422c0-1.4,1-2.284,3.178-2.284a4.18,4.18,0,0,1,3.892,1.958l7.2,9.927v-8.653c0-1.046-.112-2.2.342-2.785.419-.585,1.248-.447,2.511-.447s2.024-.139,2.446.447a5.163,5.163,0,0,1,.41,2.785v16c0,1.566-1.006,2.35-2.758,2.35a3.937,3.937,0,0,1-3.5-1.862l-8.01-10.545Z" transform="translate(2877.501 1345.877)" fill="#3f1b0f"/>
                        </g>
                        <g>
                            <path  d="M97.356,328.182a10.935,10.935,0,1,0,10.861,10.936A10.941,10.941,0,0,0,97.356,328.182Zm0,4.315a6.627,6.627,0,0,1,6.307,4.764.5.5,0,0,0-.254-.275,13.651,13.651,0,0,0-12.108,0,.5.5,0,0,0-.254.275A6.627,6.627,0,0,1,97.356,332.5Zm-6.447,7.925a.5.5,0,0,0,.414.37l1.209.169a3.555,3.555,0,0,1,2.991,3.011l.168,1.217a.5.5,0,0,0,.3.389A6.655,6.655,0,0,1,90.908,340.423Zm6.447.215a1.521,1.521,0,1,1,1.509-1.519A1.519,1.519,0,0,1,97.356,340.638Zm1.366,4.941a.5.5,0,0,0,.3-.389l.168-1.217a3.557,3.557,0,0,1,2.991-3.011l1.209-.169a.507.507,0,0,0,.416-.37A6.658,6.658,0,0,1,98.721,345.579Z" transform="translate(-23.492 -324.04)" fill="#3f1b0f"/>
                            <animateTransform attributeName="transform" dur="2s" type="rotate" values="-30 73.8 14.9;30 73.8 14.9;-30 73.8 14.9" additive="sum" repeatCount="indefinite"></animateTransform>
                        </g>
                    </svg>
                    <h1 class="logo__h1">NINO CAR</h1>
                </a>
                <form class="d-md-none ml-5 po-re">
                    <input type="text" class="search-bar__input" placeholder="想找什麼車？"  v-model='searchItem' />
                    <button class="search-bar__btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 52 52" class="icon">
                            <g>
                                <circle cx="16.5" cy="16.5" r="16.5" transform="translate(7.175 5.413)" fill="none"
                                    stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="5" />
                                <circle cx="16.5" cy="16.5" r="10" transform="translate(7.175 5.413)" fill="none"
                                    stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    class="hover-stroke-coffee" />
                                <line x1="10" y1="10" transform="translate(35.163 34.349)" fill="none" stroke="#522613"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="5" />
                            </g>
                        </svg>
                    </button>
                </form>
            </div>
            <nav>
                <ul class="d-flex align-items-center">
                    <li class="lg-1" v-if="isLogin">
                        <a href="membermain.html" aria-label="member">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 52 52"
                                class="icon">
                                <g transform="translate(3 6.5)">
                                    <g transform="translate(9 -1)" fill="none" stroke="#522613" stroke-width="5">
                                        <circle cx="14" cy="14" r="14" stroke="none" />
                                        <circle cx="14" cy="14" r="11.5" fill="none" />
                                    </g>
                                    <g transform="translate(4 29)" fill="none" stroke="#522613" stroke-width="5">
                                        <ellipse cx="18.5" cy="7.5" rx="18.5" ry="7.5" stroke="none" />
                                        <ellipse cx="18.5" cy="7.5" rx="16" ry="5" fill="none" />
                                    </g>
                                    <circle cx="2" cy="2" r="2" transform="translate(17 8.725)"
                                        class="hover-fill-coffee" fill="none" />
                                    <circle cx="2" cy="2" r="2" transform="translate(25 8.725)"
                                        class="hover-fill-coffee" fill="none" />
                                </g>
                            </svg>
                        </a>
                    </li>
                    <li class="lh-1 ml-10 ml-sm-5" v-if="isLogin">
                        <a href="MemberNotice.html" aria-label="message" @click.prevent="sendMail">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 52 52"
                                class="icon">
                                <g transform="translate(6.473 4.772)">
                                    <path
                                        d="M32.3,14.12a11.12,11.12,0,0,0-22.24,0C10.06,27.094,4.5,30.8,4.5,30.8H37.86S32.3,27.094,32.3,14.12"
                                        transform="translate(-1.601 -0.584)" fill="none" stroke="#522613"
                                        stroke-linecap="round" stroke-linejoin="round" stroke-width="5" />
                                    <path d="M22.932,31.5a4.351,4.351,0,0,1-7.527,0" transform="translate(0.413 6.835)"
                                        fill="none" stroke="#522613" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="5" />
                                    <path d="M22.3,8.281S25.877,9.8,25.621,18.86" fill="none" stroke="none"
                                        stroke-linecap="round" stroke-width="3" class="hover-stroke-coffee" />
                                </g>
                            </svg>
                        </a>
                    </li>
                    <li v-if="!isLogin">
                        <button class="header__btn" @click="handleLoginModalShow">登入 / 註冊</button>
                    </li>
                    <li class="ml-10 ml-sm-5 lh-1">
                        <svg role="button" aria-label="menu" xmlns="http://www.w3.org/2000/svg" width="40" height="40"
                            viewBox="0 0 50 50" class="icon" v-if="!isMenuShow" @click="isMenuShow=true">
                            <circle cx="25" cy="25" r="23" fill="none" stroke="#522613" stroke-width="4"
                                class="hover-fill-white" />
                            <line x1="15" y1="17" x2="35" y2="17" stroke="#522613" stroke-width="4"
                                stroke-linecap="round" />
                            <line x1="15" y1="25" x2="35" y2="25" stroke="#522613" stroke-width="4"
                                stroke-linecap="round" />
                            <line x1="15" y1="32" x2="35" y2="32" stroke="#522613" stroke-width="4"
                                stroke-linecap="round" />
                        </svg>
                        <svg role="button" aria-label="close" xmlns="http://www.w3.org/2000/svg" width="40" height="40"
                            viewBox="0 0 50 50" class="icon close-icon" v-if="isMenuShow" @click="isMenuShow=false">
                            <circle cx="25" cy="25" r="23" fill="#fff" stroke="#522613" stroke-width="4" />
                            <line x1="15" y1="15" x2="35" y2="35" stroke="#522613" stroke-width="4"
                                stroke-linecap="round" />
                            <line x1="15" y1="35" x2="35" y2="15" stroke="#522613" stroke-width="4"
                                stroke-linecap="round" />
                        </svg>
                    </li>
                </ul>
            </nav>
        </div>
        <link-group />
        <transition name="fade">
            <modal-member v-if="isLoginModalShow" :is-error.sync="modalState['isError']" :content.sync="modalState['content']"
             :ui-state="modalState['uiState']" :sign-up-token="signUpInfo['token']" :sign-up-account="signUpInfo.account" 
             @close="handleLoginModalClose" @login="handleLogin" @log-out="handleLogOut" @sign-up="handleSignUp" 
             @submit-token="handleCompleteSignUp" @done-account="handleAccountIsValidCheck"/>
        </transition>
        <transition name="collapse">
            <nav-menu v-if="isMenuShow" @search_props_item="searchChange"  :login="isLogin" @log-out="handleLogOut"></nav-menu>
        </transition>
        <div class="modal-active" v-if="isMenuShow" @click="isMenuShow=false"></div>
    </header>`,
    props: ['modalStateContent'],
    data() {
      return {
        memberId: '',
        secretKey: 'nino',
        isLogin: false,
        isMenuShow: false,
        modalState: {
          isError: '',
          content: this.modalStateContent || 'login-content',
          uiState: '',
        },
        signUpInfo: {
          account: '',
          password: '',
          token: '',
        },
        searchItem: '',
      }
    },
    mounted() {
      const storageMemberId = localStorage.getItem('memberId');
      if (storageMemberId) {
        const rawMemberId = CryptoJS.AES.decrypt(storageMemberId, this.secretKey).toString(CryptoJS.enc
          .Utf8);
        console.log(rawMemberId)
        this.memberId = rawMemberId;
        this.isLogin = true;
        this.$store.commit('setMemberId', rawMemberId);
      }
    },
    store,
    watch: {
      modalStateContent(val) {
        this.modalState.content = val;
      },
      searchItem(val) {
        this.$emit('search_item', val);
      },
    },
    computed: {
      isLoginModalShow() {
        return this.$store.state.isLoginModalShow
      },
    },
    methods: {
      searchChange(val) {
        this.$emit('search_item', val);

      },
      handleLoginModalClose() {
        this.$store.commit('setLoginModalShow', false);
        this.modalState.isError = '';
        if (this.modalStateContent) {
          console.log('update to login')
          this.$emit('update:modalStateContent', 'login-content')
        } else {
          this.modalState.content = 'login-content'
        }
      },
      handleLoginModalShow() {
        this.$store.commit('setLoginModalShow', true);
      },
      handleAccountIsValidCheck(theAccount) {
        this.modalState.isError = '';
        axios.post('./assets/php/getMemberInfo.php', {
            "account": theAccount,
          }).then(res => {
            console.log(res)
            if (Array.isArray(res.data)) {
              this.modalState.isError = '此帳號已被註冊';
            } else {
              this.modalState.isError = '';
            }
          })
          .catch(error => {
            console.log(error)
          });

      },

      handleLogin(theAccount, thePassword) {
        this.modalState.isError = '';
        this.modalState.uiState = 'loading';
        axios.post('./assets/php/login.php', {
          "account": theAccount,
          "password": thePassword
        }).then(res => {
          console.log(res)
          this.modalState.uiState = '';

          if (Array.isArray(res.data)) {
            this.modalState.content = 'success-login-content';
            this.handleLoginKeep(res.data[0]['member_id']);
            setTimeout(() => {
              this.$store.commit('setLoginModalShow', false);
            }, 3000)

            const params = new URLSearchParams()
            params.append('ID', res.data[0]['member_id'])

            axios({
              method: 'post',
              url: 'assets/php/setMemberCoupon.php',
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
              },
              data: params,
            }).then((res) => {
              console.log(res);
            }).catch((error) => {
              console.log(error)

            })


          } else {
            this.modalState.isError = res.data;
          }
        }).catch(error => {
          console.log(error)
        });

      },
      handleLoginKeep(rawMemberId) {
        this.isLogin = true;
        this.memberId = rawMemberId;
        // crypto加密
        const encryptedId = CryptoJS.AES.encrypt(rawMemberId, this.secretKey).toString()
        localStorage.setItem('memberId', encryptedId);
        this.$store.commit('setMemberId', rawMemberId);
      },
      handleLogOut() {
        this.isMenuShow = false;
        this.isLogin = false;
        this.modalState.content = 'login-content';
        this.$store.commit('setMemberId', '');
        localStorage.removeItem('memberId');
        //會員頁寫判斷式回首頁
        //window.location = 'http://localhost:8080/nino-scss/dist/index-front.html'
      },
      handleSignUp(theAccount, thePassword) {
        if (this.modalState.isError === '') {
          this.signUpInfo.account = theAccount;
          this.signUpInfo.password = thePassword;
          this.modalState.uiState = '傳送認證信中';
          let templateParams = {
            token: Math.floor(Math.random() * 1000),
            userMail: theAccount,
          }

          let service_id = "service_p77rlm2";
          let template_id = "template_8r123bp";
          let userID = "user_DeGKwX1jMT522C5BEPsyo"
          emailjs.send(service_id, template_id, templateParams, userID)
            .then((response) => {
              console.log('SUCCESS! 寄出驗證信');
              this.modalState.uiState = '';
              this.signUpInfo.token = templateParams.token;
              this.modalState.content = 'confirm-token-content'
            })
            .catch((error) => {
              console.log('FAILED...', error);
              this.modalState.isError = error;
            })
        }

      },
      handleCompleteSignUp() {
        this.modalState.uiState = 'loading';
        axios.post('./assets/php/signUp.php', {
            "account": this.signUpInfo.account,
            "password": this.signUpInfo.password
          })
          .then(res => {
            console.log(res)
            this.modalState.uiState = '';
            if (Array.isArray(res.data)) {
              this.modalState.content = 'success-sign-up-content';
              this.handleLoginKeep(res.data[0]['member_id']);
              setTimeout(() => {
                this.$store.commit('setLoginModalShow', false);
              }, 3000)
              this.handleSendSuccessSignUpMail(this.signUpInfo.account);

              const params = new URLSearchParams()
              params.append('ID', res.data[0]['member_id'])

              axios({
                method: 'post',
                url: 'assets/php/setMemberCoupon.php',
                headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
                },
                data: params,
              }).then((res) => {
                console.log(res);
              }).catch((error) => {
                console.log(error)

              })

            } else {
              this.modalState.isError = res.data;
              throw new Error(res.data);
            }
          })
          .catch(error => {
            console.log(error)
          });
      },
      handleSendSuccessSignUpMail(account) { //問老師寫在上面? //能讀data值嗎
        axios.post(
          `./assets/php/sendSuccessSignUpMail.php`, {
            "account": account,
          }
        ).then(res => {
          console.log(res)
        }).catch(err => {
          console.log(err);
        })

      },

    }

    // handleLogin(theAccount, thePassword) {
    //     console.log(theAccount, thePassword)
    //     const qs = QS;
    //     const json = {
    //         "account": theAccount,
    //         "password": thePassword
    //     }
    //     axios.post('http://localhost:8080/nino-scss/app/assets/php/login.php', json, {
    //             //配置`transformRequest` ，在向伺服器傳送前，修改請求資料，axios會根據修改後的資料，自動設定請求頭
    //             transformRequest: [function (data) {
    //                 return qs.stringify(data); //把資料轉化為QueryString
    //             }]
    //         }).then(res => {
    //             console.log(res)
    //         })
    //         .catch(error => {
    //             console.log(error)
    //         });
    //     console.log('parents')


    //     // this.isLogin = true;
    //     // this.isLoginModalShow = false
    // },


  });
</script>


<script>
  Vue.component('link-group', {
    template: `
            <div class="container">
            <nav class="link-group" @mouseover="isPopover = true">
                <ul>
                    <li>
                        <a href="cart.html" aria-label="cart"  @mouseenter="isPopover = false">
                          <span v-if="carts_list.length>=1" class="popovers__num">{{carts_list.length}}</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 80 80" class="icon">
                                <g transform="translate(-715 -383)">
                                    <circle cx="40" cy="40" r="37" transform="translate(715 383)" fill="#fadd61"  stroke="#ffffff" stroke-width="3"/>
                                    <g transform="translate(734 402.037)">
                                    <path  d="M16.627,32.313A2.313,2.313,0,1,1,14.313,30,2.313,2.313,0,0,1,16.627,32.313Z" transform="translate(0.072 4.523)" fill="none" stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/>
                                    <path d="M16.627,32.313A2.313,2.313,0,1,1,14.313,30,2.313,2.313,0,0,1,16.627,32.313Z" transform="translate(19.072 4.523)" fill="none" stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/>
                                    <path  d="M1.5,1.5H8.97l5,25.006a3.735,3.735,0,0,0,3.735,3.007H35.862A3.735,3.735,0,0,0,39.6,26.506l2.988-15.668H10.837" transform="translate(-2.5 1.276)" fill="none" stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/>
                                    <line  x1="6" transform="translate(-3 23.462)" fill="none" stroke="none" stroke-linecap="round" stroke-width="4" class="hover-stroke-coffee"/>
                                    <line x1="6" transform="translate(-1 30.462)" fill="none" stroke="none" stroke-linecap="round" stroke-width="4" class="hover-stroke-coffee"/>
                                    </g>
                                </g>
                            </svg>
                    <transition name="fade">  
                    <popovers  v-if="isPopover"></popovers>
                    </transition>
                        </a>

                    </li>
                    <li>
                        <a href="#" aria-label="top" v-show="isTopBtnVisible" @click.prevent="scrollTop">
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 80 80" class="icon">
                                <g transform="translate(-1660 -805)">
                                    <g transform="translate(76 -122.041)">
                                        <circle cx="40" cy="40" r="37" transform="translate(1584 927.041)" fill="#fadd61" stroke="#ffffff" stroke-width="3"/>
                                    </g>
                                    <text transform="translate(1700 862)" fill="#522613" font-size="32" font-family="NotoSans-Bold, Noto Sans" font-weight="700"><tspan x="-31.891" y="0">TOP</tspan></text>
                                    <g transform="translate(1995.252 1047.249) rotate(180)">
                                    <path d="M301.122,234.488a1.2,1.2,0,0,1-.864-.366l-6.664-6.875a1.2,1.2,0,0,1,1.729-1.676l5.741,5.922,4.986-5.864a1.2,1.2,0,0,1,1.834,1.559l-5.845,6.875a1.2,1.2,0,0,1-.878.423Z" transform="translate(-5.703 -8.294)" fill="#522613"/>
                                    </g>
                                    <g transform="translate(1995.252 1037.967) rotate(180)">
                                    <path d="M301.122,234.488a1.2,1.2,0,0,1-.864-.366l-6.664-6.875a1.2,1.2,0,0,1,1.729-1.676l5.741,5.922,4.986-5.864a1.2,1.2,0,0,1,1.834,1.559l-5.845,6.875a1.2,1.2,0,0,1-.878.423Z" transform="translate(-5.703 -8.294)" fill="none" class="hover-fill-coffee"/>
                                    </g>
                                </g>
                            </svg>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
            `,
    data() {
      return {
        isTopBtnVisible: false,
        isPopover: false,
        carts_list: [],
      }
    },
    methods: {
      scrollTop() {
        this.intervalId = setInterval(() => {
          if (window.pageYOffset === 0) {
            clearInterval(this.intervalId)
          }
          window.scroll(0, window.pageYOffset - 50)
        }, 20)
      },
      scrollListener() {
        this.isTopBtnVisible = window.scrollY > 100
      },
      checkCarts_list() {
        setInterval(() => {
          this.carts_list = JSON.parse(localStorage.getItem('cartsList')) || [];
        }, 100);

      },

    },
    mounted() {
      window.addEventListener('scroll', this.scrollListener);
      this.checkCarts_list();
    },
    beforeDestroy() {
      window.removeEventListener('scroll', this.scrollListener)
    }

  });
</script> <script>
  Vue.component('nav-menu', {
    template: `
            <nav class="menu">
                <div class="container">
                   <div class="row mt-5 mt-md-20 mt-sm-25">
                       <div class="col-8 col-lg-5 col-sm-4 mx-auto">
                            <form class="po-re mb-8">
                                <input type="text" class="search-bar__input w-100"   v-model='searchItems'/>
                                <button class="search-bar__btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 52 52" class="icon">
                                        <g>
                                            <circle cx="16.5" cy="16.5" r="16.5" transform="translate(7.175 5.413)" fill="none"
                                                stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="5" />
                                            <circle cx="16.5" cy="16.5" r="10" transform="translate(7.175 5.413)" fill="none"
                                                stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                class="hover-stroke-coffee" />
                                            <line x1="10" y1="10" transform="translate(35.163 34.349)" fill="none" stroke="#522613"
                                                stroke-linecap="round" stroke-linejoin="round" stroke-width="5" />
                                        </g>
                                    </svg>
                                </button>
                            </form>
                            <div class="d-flex flex-md-column">
                                <ul class="w-50  w-md-100 mr-5 mr-md-0">
                                    <li class="mb-2"><a href="product.html" class="menu__link link">全部商品<span class="h4 ml-10">All Products</span></a></li>
                                    <li class="mb-2"><a href="product.html" class="menu__link link">最新商品<span class="h4 ml-10">New Arrival</span></a></li>
                                    <li class="mb-2"><a href="product.html" class="menu__link link">本月主打<span class="h4 ml-10">Campaign</span></a></li>
                                    <li class="mb-2"><a href="product.html" class="menu__link link">熱門商品<span class="h4 ml-10">Popular</span></a></li>
                                    <li class="mb-2"><a href="product.html" class="menu__link link">點數限定<span class="h4 ml-10">Points Only</span></a></li>                 
                                </ul>
                                <ul class="w-50 w-md-100">
                                <li class="mb-2"><a href="factory.html" class="menu__link link">車車工廠<span class="h4 ml-10">Customization</span></a></li>
                                <li class="mb-2"><a href="dictionary.html" class="menu__link link">車車圖鑑<span class="h4 ml-10">Dictionary</span></a></li>
                                <li class="mb-5"><a href="membermain.html" class="menu__link link"  v-if="login">會員中心<span class="h4 ml-10">Member</span></a></li>
                                <li class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex ml-2">
                                        <img src="./assets/img/icon/icon-fb.svg" class="link icon">
                                        <img src="./assets/img/icon/icon-ig.svg" class="link icon ml-5">
                                    </div>
                                    <button class="header__btn px-5" v-if="login" @click="$emit('log-out')">登出</button>
                                </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>          
            </nav>
            `,
    props: ['login'],
    data() {
      return {
        searchItems: '',
      };
    },
    methods: {

    },
    watch: {
      searchItems(val) {
        this.$emit('search_props_item', val);
      },
    },



  });
</script> <script>
    Vue.component('modal-member', {
        template: '#modal-member',
        props: ['is-error', 'content', 'ui-state', 'sign-up-token', 'sign-up-account'],
        methods: {
            handleModalClose() {
                this.$emit('close');
            },
            handleContentChange(targetContent) {
                // this.content = targetContent;
                this.$emit('update:content', targetContent);
                this.$emit('update:isError', '');
            },
            handleLoginInform(account, password) {
                this.$emit('login', account, password)
            },
            handleSignUpInform(account, password) {
                this.$emit('sign-up', account, password)
            },
            handleSubmitTokenInform(token) {
                this.$emit('submit-token', token)
            },
            handleDoneAccountInform(account) {
                this.$emit('done-account', account)
            }
        },
    });
</script>

<template id="modal-member">
    <div class="modal">
        <div class="po-ab h-100 w-100" @click="handleModalClose"></div>
        <div class="modal__group modal__group--sm">
            <svg role="button" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 52 52"
                class="icon modal__btn modal__btn--close" @click="handleModalClose">
                <g transform="translate(0 0.47)">
                    <line x1="33.493" transform="translate(14.158 13.688) rotate(45)" fill="none" stroke="#522613"
                        stroke-linecap="round" stroke-width="5" />
                    <line x1="33.493" transform="translate(37.842 13.688) rotate(135)" fill="none" stroke="#522613"
                        stroke-linecap="round" stroke-width="5" />
                </g>
            </svg>
            <login-content v-if="content === 'login-content'" :login-error="isError" :btn-ui="uiState"
                @login="handleLoginInform" @change="handleContentChange">
            </login-content>
            <success-login-content v-else-if="content === 'success-login-content'"></success-login-content>
            <success-sign-up-content v-else-if="content === 'success-sign-up-content'"></success-sign-up-content>
            <log-out-content v-else-if="content === 'log-out-content'" @log-out="$emit('log-out')"
                @close="handleModalClose" :btn-ui="uiState"></log-out-content>
            <sign-up-content v-else-if="content === 'sign-up-content'" :account-error="isError" :btn-ui="uiState"
                @sign-up="handleSignUpInform" @done-account="handleDoneAccountInform" @change="handleContentChange">
            </sign-up-content>
            <confirm-token-content v-else-if="content === 'confirm-token-content'" :btn-ui="uiState"
                :email="signUpAccount" :correct-token="signUpToken" @submit="handleSubmitTokenInform">
            </confirm-token-content>
            <reset-password-content v-else-if="content === 'reset-password-content'" @reset="$emit('reset')"
                @change="handleContentChange">
            </reset-password-content>
        </div>
    </div>
</template>

<script src="./assets/js/mixins/InputMixins.js"></script>
  <script>
      Vue.component('login-content', {
          template: '#login',
          props: ['loginError', 'btn-ui'],
          mixins: [inputMixins],
          data() {
              return {
                  account: {
                      name: '帳號',
                      text: '',
                      remind: '',
                      inputClass: '',
                  },
                  password: {
                      name: '密碼',
                      text: '',
                      remind: '',
                      inputClass: '',
                  },
              }
          },
          computed: {
              inputList() {
                  return [this.account, this.password]
              }
          },
          watch: {
              loginError(message) {
                  if (message) {
                      this.handleErrorShow(this.account, message)
                      this.handleErrorShow(this.password, message)
                  }
              },
          },
          methods: {
              handleLogin() {
                  const isAllCheck = this.handleRequiredCheck();
                  if (isAllCheck) {
                      this.$emit('login', this.account.text, this.password.text);
                  }
              },
              handleSignUpShow() {
                  this.$emit('change', 'sign-up-content');
              },
              handlePasswordResetShow() {
                  this.$emit('change', 'reset-password-content');
              },

          }
      });
  </script>
  <template id="login">
      <form>
          <h2 class="modal__title mb-5">
              登入
          </h2>
          <div class="form__group mb-5">
              <label for="account" class="form__text">帳號</label><span v-if="account.remind!==''"
                  class="form__text form__text--warning">{{account.remind}}</span>
              <input type="text" class="form__input" :class="account.inputClass" v-model.lazy="account.text"
                  @keydown.enter.prevent="$refs.loginPassword.focus()" placeholder="abc@gmail.com"
                  autocomplete="username" @change="handleEmailCheck(account)" />
          </div>
          <div class="form__group mb-12">
              <label for="password" class="form__text">密碼</label><span v-if="password.remind!==''"
                  class="form__text form__text--warning">{{password.remind}}</span>
              <input type="password" ref="loginPassword" :class="password.inputClass" v-model.lazy="password.text"
                  @change="handlePasswordCheck(password)" class="form__input" autocomplete="new-password"
                  placeholder="***" />
          </div>
          <div class="text-right">
              <a href="#" class="btn btn--link d-inbl mb-6 " @click.prevent="handlePasswordResetShow">忘記密碼</a>
          </div>
          <button class="btn btn--fluid mb-4" ref="loginBtn" @click.prevent="handleLogin">{{btnUi || '登入'}}</button>
          <a href="#" class="btn btn--fluid btn--outline" @click.prevent="handleSignUpShow">註冊</a>
      </form>
  </template>
  <script>
      Vue.component('log-out-content', {
          template: '#logOut',
      });
  </script>
  <template id="logOut">
      <div>
          <h2 class="modal__title mb-18">
              確定登出？
          </h2>
          <h3 class="h4 mb-10">
              登出後，若有上在編輯的
          </h3>
          <button class="btn btn--fluid mb-4" @click="$emit('log-out')">登出</button>
          <button class="btn btn--fluid btn--outline" @click="$emit('close')">返回</button>
      </div>
  </template>
   <script>
       Vue.component('sign-up-content', {
           template: '#signUp',
           mixins: [inputMixins],
           props: ['accountError', 'btn-ui'],
           data() {
               return {
                   account: {
                       name: '帳號',
                       text: '',
                       remind: '',
                       inputClass: '',
                   },
                   password: {
                       name: '密碼',
                       text: '',
                       remind: '',
                       inputClass: '',
                   },
                   confirmPassword: {
                       name: '確認密碼',
                       text: '',
                       remind: '',
                       inputClass: '',
                   },
                   policy: {
                       isAgree: false,
                       spanClass: '',
                   },
               }
           },
           computed: {
               inputList() {
                   return [this.account, this.password, this.confirmPassword]
               }
           },
           watch: {
               accountError(message) {
                   if (message) {
                       this.handleErrorShow(this.account, message)
                   }
               },
           },
           methods: {
               handleLoginShow() {
                   this.$emit('change', 'login-content');
               },
               handleSignUp() {
                   this.handlePasswordMatchCheck(this.password, this.confirmPassword);
                   const isAllCheck = this.handleRequiredCheck();
                   if (!this.policy.isAgree) {
                       this.policy.spanClass = "warning"
                   } else if (isAllCheck && this.policy.isAgree) {
                       this.$emit('sign-up', this.account.text, this.password.text);
                   }
               },
               handleAccountDoubleCheck() {
                   this.handleEmailCheck(this.account)
                   if (this.account.remind === '') {
                       this.$emit('done-account', this.account.text);
                   }
               },
               handlePolicyAgreeCheck() {
                   this.policy.isAgree ? this.policy.spanClass = '' : ''
               }
           }
       });
   </script>
   <template id="signUp">
       <form method="POST" @submit.prevent="handleSignUp">
           <h2 class="modal__title mb-5">
               註冊新帳號
           </h2>
           <div class="form__group mb-5">
               <label for="account" class="form__text">帳號</label><span v-if="account.remind!==''"
                   class="form__text form__text--warning">{{account.remind}}</span>
               <input type="text" class="form__input" :class="account.inputClass" v-model.lazy="account.text"
                   @keydown.enter.prevent="$refs.signUpPassword.focus()" autocomplete="username"
                   placeholder="abc@gmail.com" @change="handleAccountDoubleCheck" id="account" />
           </div>
           <div class="form__group mb-5">
               <label for="password" class="form__text">密碼</label><span v-if="password.remind!==''"
                   class="form__text form__text--warning">{{password.remind}}</span>
               <input type="password" ref="signUpPassword" :class="password.inputClass" v-model.lazy="password.text"
                   @keydown.enter.prevent="$refs.signUpConfirmPassword.focus()" @change="handlePasswordCheck(password)"
                   class="form__input" placeholder="請輸入6至12位大小寫字母和數字" autocomplete="new-password" id="password" />
           </div>
           <div class="form__group mb-4">
               <label for="confirmPpassword" class="form__text">確認密碼</label><span v-if="confirmPassword.remind!==''"
                   class="form__text form__text--warning">{{confirmPassword.remind}}</span>
               <input type="password" ref="signUpConfirmPassword" :class="confirmPassword.inputClass"
                   v-model.lazy="confirmPassword.text" @change="handlePasswordMatchCheck(password,confirmPassword)"
                   class="form__input" placeholder="請確認密碼" autocomplete="new-password" id="confirmPpassword" />
           </div>
           <div class="text-left">
               <label class="custom-input mb-4 ">同意<a href="./policy.html" target="blank"
                       class="d-inbl link underline">資料使用政策與使用條款</a>
                   <input type="checkbox" v-model="policy.isAgree" class="custom-input__input"
                       @change="handlePolicyAgreeCheck">
                   <span class="custom-input__checkmark" :class="policy.spanClass" ref="policyCheckbox"></span>
               </label>
           </div>
           <button class="btn btn--fluid mb-4" ref="signUpBtn" type="submit"
               @click.prevent="handleSignUp">{{btnUi || '註冊'}}</button>
           <a href="#" class="btn btn--link" @click.prevent="handleLoginShow">回上一頁</a>
       </form>
   </template>
<script>
  Vue.component('success-login-content', {
    template: '#successLogin',
    data() {
      return {

      }
    },
    computed: {

    },
    methods: {

    }
  });
</script>
<template id="successLogin">
    <div>
        <h2 class="modal__title mb-18">
            登入成功
        </h2>
        <svg
            width="80"
            height="80"
        >
            <circle
                cx="40"
                cy="40"
                r="40"
                fill="#fadd61"
            />
            <polyline
                points="25,43 38,58 58,28"
                style="fill:none;stroke:#522613;stroke-width:7;stroke-linecap:round ;stroke-linejoin:round"
            >
            </polyline>
        </svg>
        <h3 class="h4 mb-10">歡迎回來</h3>
        <p class="h4 text-left mb-4">你不在的這段時間，有新商品推出囉！點擊下方按鈕查看最新商品</p>
        <a
            href="./product.html"
            class="btn btn--fluid mb-4"
        >看看最新商品</a>
        <a
            href="./membermain.html"
            class="btn btn--fluid btn--outline"
        >查看我的帳戶</a>
    </div>
</template>
<script>
  Vue.component('success-sign-up-content', {
    template: '#successSignUp',
    data() {
      return {

      }
    },
    computed: {
      countDown() {

      }
    },
    methods: {

    }
  });
</script>
<template id="successSignUp">
    <div>
        <h2 class="modal__title mb-18">
            註冊成功
        </h2>
        <svg
            width="80"
            height="80"
        >
            <circle
                cx="40"
                cy="40"
                r="40"
                fill="#fadd61"
            />
            <polyline
                points="25,43 38,58 58,28"
                style="fill:none;stroke:#522613;stroke-width:7;stroke-linecap:round ;stroke-linejoin:round"
            >
            </polyline>
        </svg>
        <h3 class="h4 mb-10">歡迎加入</h3>
        <p class="h4 text-left mb-4">72 小時內首次購物享 9 折優惠，剩餘有效時間 {{countDown}}</p>
        <a
            href="./product.html"
            class="btn btn--fluid mb-4"
        >逛逛熱門商品</a>
        <a
            href="./memberNotice.html"
            class="btn btn--fluid btn--outline"
        >查看我的優惠券</a>
    </div>
</template>
<script>
    Vue.component('confirm-token-content', {
        template: '#confirmToken',
        props: ['email', 'correct-token', 'btnUi'],
        mixins: [inputMixins],
        data() {
            return {
                token: {
                    name: '驗證碼',
                    text: '',
                    remind: '',
                    inputClass: '',
                },
            }
        },
        methods: {
            handleTokenSubmit() {
                if (this.token.text.trim() === '') {
                    this.handleErrorShow(this.token, '不能空白')
                } else if (parseInt(this.token.text) !== this.correctToken) {
                    this.handleErrorShow(this.token, '驗證碼錯誤')
                } else if (parseInt(this.token.text) === this.correctToken) {
                    this.handleSuccessShow(this.token)
                    this.$emit('submit');
                }
            },

        }
    });
</script>
<template id="confirmToken">
    <form @submit.prevent>
        <h2 class="modal__title mb-5">
            請輸入驗證碼
        </h2>
        <h3 class="h4 mb-10">已將註冊認證信寄送至{{email}}</h3>
        <p class="h4 mb-5">請輸入驗證碼以完成帳號註冊</p>
        <div class="form__group mb-5">
            <label for="token" class="form__text">驗證碼</label><span v-if="token.remind!==''"
                class="form__text form__text--warning">{{token.remind}}</span>
            <input type="text" class="form__input" :class="token.inputClass" v-model.lazy="token.text" name="token" />
        </div>
        <button class="btn btn--fluid mb-4" @click.prevent="handleTokenSubmit">{{btnUi || "送出"}}</button>
        <button class="btn btn--fluid btn--outline mb-4" @click.prevent="console.log('開發中')">重新寄驗證碼</button>
    </form>
</template>
  <script>
      Vue.component('reset-password-content', {
          template: '#resetPassword',
          mixins: [inputMixins],
          methods: {
              handlePasswordReset() {
                  this.$emit('reset');
              },
              handleLoginShow() {
                  this.$emit('change', 'login-content');
              },

          }
      });
  </script>
  <template id="resetPassword">
      <form @submit.prevent>
          <h2 class="modal__title mb-5">
              忘記密碼
          </h2>
          <h3 class="h4 mb-10">
              請輸入註冊時的電子信箱，我們會發送一封信，點擊信件中的連結以重設密碼
          </h3>
          <div class="form__group mb-18">
              <label for="account" class="form__text">電子信箱</label>
              <input type="text" class="form__input" id="account" placeholder="abc@gmail.com" />
          </div>
          <button class="btn btn--fluid mb-4" @click.prevent="handlePasswordReset">送出</button>
          <button class="btn btn--link" @click="handleLoginShow">回上一頁</button>
      </form>
  </template> <template id="popovers">

  <div class="popovers">
    <p>共<span class="popovers__cartItems">{{carts_list.length}}</span>件商品</p>
    <p>總金額：NT$<span class="popovers__totalCost">{{cost}}</span></p>
    <div class="popovers__member">總需點數：<p>Ni <span>{{point}}</span></p>
    </div>
  </div>
</template>



<script>
  Vue.component('popovers', {
    template: '#popovers',
    data() {
      return {
        carts_list: [],
      }
    },
    mounted() {
      this.carts_list = JSON.parse(localStorage.getItem('cartsList')) || [];
    },
    computed: {

      cost() {

        let num1 = 0;

        for (let num in this.carts_list) {

          num1 += this.carts_list[num]['price'];


        }
        return num1;

      },
      point() {


        let num1 = 0;

        for (let num in this.carts_list) {

          num1 += this.carts_list[num]['points'];


        }
        return num1;


      },

    },

  })
</script>

  <script>
    const bus = new Vue();

    //全域component
    //emptyState
    Vue.component('empty-state', {
      data() {
        return {
          description: '目前沒有作品',
          description2: '快去完成你的作品吧',
          btnDes: '開始製作',
          url: "window.location='../../dist/factory.html'"
        };
      },
      template: `
                <div class="">
                    <div class="emptyState row pt-25">
                        <div class="empty--left col-6 col-lg-3 col-sm-2">
                            <img src="./assets/img/illust/illust-empty.png" alt="">
                        </div>
                        <div class="empty--right col-6 col-lg-3 col-sm-2">
                            <p class="mb-6 h4" v-bind:details="description">{{description}}</p>
                            <p class="mb-12 h4"  v-bind:details="description2">{{description2}}</p>
                            <button class="btn" v-bind:btnText="btnDes" :onclick=url>{{btnDes}}</button>
                        </div>
                    </div>
                    <ul class="putMywork"></ul>
                </div>`,
      props: ['details', 'details2', 'btn-text']
    });

    //檢舉彈窗
    Vue.component('report-modal', {
      data() {
        return {
          isReportModalShow: false,
          isReportSuccessModalShow: false
        }
      },
      template: `<div class="modal js-modal reportModal" data-modal="1" v-if="isReportModalShow">
                    <div class="modal__group" >
                        <svg role="button" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 52 52" class="icon modal__btn modal__btn--close" @click="isReportModalShow=false">
                                    <g transform="translate(0 0.47)">
                                        <line x1="33.493" transform="translate(14.158 13.688) rotate(45)" fill="none" stroke="#522613" stroke-linecap="round" stroke-width="5"/>
                                        <line x1="33.493" transform="translate(37.842 13.688) rotate(135)" fill="none" stroke="#522613" stroke-linecap="round" stroke-width="5"/>
                                    </g>
                                    </svg>
                        <h2 class="modal__title">
                            檢舉
                        </h2>
                        <p class="modal__content--left">檢舉留言這篇留言的原因?</p>
                        <ul class="modal__textGroup">
                            <li class="modal__textGroupContent"> <input type="radio" name="check" id="bad1"> <label for="bad1">中傷、歧視、謾罵等人身攻擊言論</label> </li>
                            <li class="modal__textGroupContent"> <input type="radio" name="check" id="bad2"> <label for="bad2">包含性騷擾或血腥恐怖等讓人不舒服之內容</label></li>
                            <li class="modal__textGroupContent"> <input type="radio" name="check" id="bad3"> <label for="bad3">文章內容空泛或明顯無意義內容</label> </li>
                            <li class="modal__textGroupContent"> <input type="radio" name="check" id="bad4"> <label for="bad4">涉及宗教、種族歧視或政治對立等言論</label> </li>
                            <li class="modal__textGroupContent"> <input type="radio" name="check" id="bad5"> <label for="bad5">留言內容空泛或無關作品內容</label> </li>
                        </ul>
                        <button class="btn btn--ghost" @click="isModalShow=false">取消</button>
                      
                        <button class="btn ml-5 finishReport" @click="openReportSuccessModal">完成</button>
                    </div>
                </div>`,
      mounted() { //接收來自work-card的訊號
        bus.$on('report-emit', () => this.isReportModalShow = true);
      },
      methods: {
        openReportSuccessModal() {
          console.log('打開檢舉成功的彈窗')
          bus.$emit('success-emit')
          this.isReportModalShow = false;
        }
      },


    })

    //檢舉成功彈窗
    Vue.component('report-success-modal', {
      data() {
        return {
          isReportSuccessModalShow: false,
        }
      },
      template: `<div class="modal js-modal reportSuccessModal" data-modal="3" v-if="isReportSuccessModalShow">
                    <div class="modal__group">
                        <svg role="button" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 52 52" class="icon modal__btn modal__btn--close" @click="isReportSuccessModalShow=false">
                            <g transform="translate(0 0.47)">
                                <line x1="33.493" transform="translate(14.158 13.688) rotate(45)" fill="none" stroke="#522613" stroke-linecap="round" stroke-width="5"/>
                                <line x1="33.493" transform="translate(37.842 13.688) rotate(135)" fill="none" stroke="#522613" stroke-linecap="round" stroke-width="5"/>
                            </g>
                        </svg>
                        <h2 class="modal__title mb-18">
                            檢舉已送出
                        </h2>
                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">
                            <g id="Group_1780" data-name="Group 1780" transform="translate(-921 -365)">
                              <circle id="Ellipse_120" data-name="Ellipse 120" cx="35" cy="35" r="35" transform="translate(921 365)" fill="#fadd61"/>
                              <path id="Path_5276" data-name="Path 5276" d="M17498.2,5073.67l10.637,13.265,17.461-24.223" transform="translate(-16556.963 -4671.098)" fill="none" stroke="#522613" stroke-linecap="round" stroke-linejoin="round" stroke-width="6"/>
                            </g>
                        </svg>

                        <p class="modal__content">檢舉完成</p>
                        <p class="modal__text mt-20 mb-20">您的檢舉已送出，感謝通知，我們會盡快處理</p>
                    </div>
                </div>
            `,
      mounted() {
        bus.$on('success-emit', () => this.isReportSuccessModalShow = true);
      },
    })

    //作品大彈窗
    Vue.component('work-modal', {
      props: {
        goodN: {
          default: 0,
          type: Number
        }
      },
      data() {
        return {
          goodNum: null,
          // goodNum:this.goodN,
          commentNum: null,
          isWorkModalShow: false,
          is_icon_color: false,
          workImgURL: '',
          price: '',
          title: '',
          cartList: [],
          click: null,
        }
      },
      template: `    
            <div class="mask" v-if="isWorkModalShow">
                <div class="container factoryModalOut">
                    <div class="row">
                        <div class="work_left col-6 col-lg-3 col-sm-4">
                            <div  class="frame">
                            <img :src="workImgURL" class="workPic--big">
                            </div>
                    
                            <p class="h2">{{title}}</p>
                            <div class="otherInModal">
                            <div class="price">
                                <p class="h1">NT$</p>
                                <p class="h1 work-priceNum">{{price}}</p>
                            </div>
                    
                            <div class="col-6 col-lg-3 col-sm-1">
                                <button class="btn btn--fluid btn--outline addToCart" @click="addCartList">加入購物車</button>
                            </div>
                            </div>
                        </div>
                    
                        <div class="work_right col-6 col-lg-3 col-sm-4">
                            <img src="./assets/img/icon/icon-close.svg" class="closeIcon" @click="closeWorkModal">
                            <div class="work_author">
                                <img src="./assets/img/pic/userPic.png"  class="userPic--big">
                                <div class="userContent">
                                    <p class="userName h6">矛盾的小女子</p>
                                    <h2 class="workName h4">天栗鼠計程車</h2>
                                    <p class="userContent h5">這是一隻天栗鼠，這不是一隻天栗鼠，這到底是不是一隻天栗鼠？</p>
                                    <div class="otherInModal">
                                        <p class="postTime h6">3小時前</p>
                                        <button class="btn btn--link">檢舉</button>
                                    </div>
                                </div>
                            </div>
            
                            <div class="workInfo">
                                <div class="workInfo_good">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon goodIcon" @mouseover="coloredIcon" @mouseout="noColorIcon" @click="addGoodNum">
                                        <g transform="translate(-729 -275)">
                                        <path d="M14.513,37.47l10.1.209c4.043,0,8.616-5.286,9.752-7.915,0,0,3.514-7.2,2.541-12.055-1.78-3.084-4.026-2.219-13.046-2.219l1.545-7,.052-.515a2.489,2.489,0,0,0-.713-1.743L23.013,4.5,12.194,15.43a3.3,3.3,0,0,0-.944,2.327V34.241A3.237,3.237,0,0,0,14.513,37.47Z" transform="translate(735.366 280.5)" fill="none" stroke="#E59807" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" :class="{'pin--secondary':is_icon_color === true}"/>
                                        <path d="M3.375,15.75H8.87V34.982H3.375Z" transform="translate(733.625 282.987)" fill="#E59807" :class="{'pin--secondary':is_icon_color === true}"/>
                                        </g>
                                    </svg>
                                    <p  class="work-goodNum h3" >{{goodNum}}</p>
                                </div>
                                <div class="workInfo_reply">                                   
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon commentIcon">
                                        <g transform="translate(-396.868 -362.313)">
                                        <path  d="M413.686,374.254c-8.888,0-16.12,6.165-16.12,13.743a12.384,12.384,0,0,0,3.545,8.634l0,0,0,0a5.214,5.214,0,0,1,1.473,3.662,6.52,6.52,0,0,1,2-.328,5.51,5.51,0,0,1,2.032.38h.006a18.861,18.861,0,0,0,7.058,1.389c8.888,0,16.12-6.165,16.12-13.745s-7.232-13.743-16.12-13.743m0-4.666c11.479,0,20.786,8.242,20.786,18.41s-9.307,18.411-20.786,18.411a23.417,23.417,0,0,1-8.774-1.716.893.893,0,0,0-.322-.055c-1.569,0-4.921,3.126-6.8,3.126a1.16,1.16,0,0,1-.7-.209c-1.973-1.66,1.569-6.761.7-7.646A17.091,17.091,0,0,1,392.9,388C392.9,377.83,402.206,369.588,413.686,369.588Z" transform="translate(8.967 -0.274)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(413 386)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(420 386)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(427 386)" fill="#E59807"/>
                                        </g>
                                    </svg>
                                    <p  class="work-commentNum h3" :v-text="commentNum">{{commentNum}}</p>
                                </div>
                            </div>
                            <div class="work_reply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png"  class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="otherInModal">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4">回覆</button>
                                                <button class="btn btn--link">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <div class="work_reply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png"  class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="otherInModal">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4">回覆</button>
                                                <button class="btn btn--link">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <div class="work_reply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png"  class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="otherInModal">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4">回覆</button>
                                                <button class="btn btn--link">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <div class="typeReply" >
                                <div class="typeReply_left mr-7">
                                <img src="./assets/img/pic/userPic02.png" class="userPic--big">
                                </div>
                        
                                <div class="typeReply_right">
                                <p>沾醬大師</p>
                                <textarea name="" id="" cols="60" rows="7" placeholder="讚美這個作品，或發表看法。"></textarea>
                                <div class="otherInModal">
                                    <p>餘100字</p>
                                    <button class="btn btn--small">留言</button>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`,
      mounted() {
        bus.$on('work-modal-emit', () => this.isWorkModalShow = true);

        bus.$on('send-work-img', () => this.workImgURL = comp1.workImgURL);

        this.cartList = JSON.parse(localStorage.getItem('cartsList')) || [];

        // this.click = vm1.$refs.workInfo1.clickN;

      },
      //就是這裡，如果沒有if(this.click < 1)會一直把this.goodNum +=1洗掉，但加了之後
      //變成點讚之後打開另一個work-card的work-modal會走不進this.click < 1
      updated() {
        if (smallCardId == '220203') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo1.img;
            this.goodNum = vm1.$refs.workInfo1.workGood;
            this.commentNum = vm1.$refs.workInfo1.workComment;
            this.price = vm1.$refs.workInfo1.workTotalPrice;
            this.title = vm1.$refs.workInfo1.workTitle;
          }
        } else if (smallCardId == '22310') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo2.img;
            this.goodNum = vm1.$refs.workInfo2.workGood;
            this.commentNum = vm1.$refs.workInfo2.workComment;
            this.price = vm1.$refs.workInfo2.workTotalPrice;
            this.title = vm1.$refs.workInfo2.workTitle;
          }

        } else if (smallCardId == '55555') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo3.img;
            this.goodNum = vm1.$refs.workInfo3.workGood;
            this.commentNum = vm1.$refs.workInfo3.workComment;
            this.price = vm1.$refs.workInfo3.workTotalPrice;
            this.title = vm1.$refs.workInfo3.workTitle;
          }

        } else if (smallCardId == '22111') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo4.img;
            this.goodNum = vm1.$refs.workInfo4.workGood;
            this.commentNum = vm1.$refs.workInfo4.workComment;
            this.price = vm1.$refs.workInfo4.workTotalPrice;
            this.title = vm1.$refs.workInfo4.workTitle;
          }

        } else if (smallCardId == '112303') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo5.img;
            this.goodNum = vm1.$refs.workInfo5.workGood;
            this.commentNum = vm1.$refs.workInfo5.workComment;
            this.price = vm1.$refs.workInfo5.workTotalPrice;
            this.title = vm1.$refs.workInfo5.workTitle;
          }

        } else if (smallCardId == '0033345') {
          if (this.click < 1) {
            this.workImgURL = vm1.$refs.workInfo6.img;
            this.goodNum = vm1.$refs.workInfo6.workGood;
            this.commentNum = vm1.$refs.workInfo6.workComment;
            this.price = vm1.$refs.workInfo6.workTotalPrice;
            this.title = vm1.$refs.workInfo6.workTitle;
          }
        }
      },
      methods: {
        coloredIcon(e) {
          this.is_icon_color = true;
        },
        noColorIcon(e) {
          this.is_icon_color = false;
        },
        addGoodNum(e) {
          this.click += 1;

          this.goodNum += 1;
        },
        addCartList() {
          let productArr = {
            name: this.title,
            eName: `CUSTOMIZED PRODUCT`,
            series: "CU",
            seriesId: "01",
            imgURL: this.workImgURL,
            price: this.price,
            productNum: 1,
            totalPrice: this.price,
            points: 0,
            totalPointCost: 0
          };

          this.cartList.push(productArr);

          let cartJson = JSON.stringify(this.cartList);

          localStorage.setItem('cartsList', cartJson);
        },
        closeWorkModal() {
          console.log('close work-modal')
          this.isWorkModalShow = false;
          this.click = 0;
          // 這裡

          if (this.title == '白帥帥') {
            vm1.$refs.workInfo1.goodNum_plus = this.goodNum;
          } else if (this.title == '天栗鼠計程車') {
            vm1.$refs.workInfo2.goodNum_plus = this.goodNum;
          } else if (this.title == '賣紫薯的車') {
            vm1.$refs.workInfo3.goodNum_plus = this.goodNum;
          } else if (this.title == '西瓜轎車') {
            vm1.$refs.workInfo4.goodNum_plus = this.goodNum;
          } else if (this.title == '賣橘子的車') {
            vm1.$refs.workInfo5.goodNum_plus = this.goodNum;
          } else if (this.title == '賣地瓜的車') {
            vm1.$refs.workInfo6.goodNum_plus = this.goodNum;
          }
        },
      }

    })

    //大家的作品、我的作品的卡片
    let comp1 = Vue.component('work-card', {
      props: {
        workTitle: {
          default: "天栗鼠計程車",
          type: String
        },
        img: {
          default: "./assets/img/pic/model04.png",
          type: String
        },
        goodNum: {
          default: 0,
          type: Number
        },
        commentNum: {
          default: 1,
          type: Number
        },
        postTime: {
          default: 4,
          type: Number
        },
        workTotalPrice: {
          default: 100,
          type: Number
        },
        workIndex: {
          default: 00000,
          type: Number
        },
        isIdExist: {
          default: false,
          type: Boolean
        }
      },
      data() {
        return {
          count1: 0,
          count2: 0,
          is_icon_color: false,
          goodNum_plus: this.goodNum,
          commentNum_plus: this.commentNum,
          isReportModalShow: false,
          workImgURL: '',
          workGood: null,
          workComment: null,
          workId: null,
          clickN: 0,
          isMemberIdExist: this.isIdExist,
          memId: null,
        }
      },
      template: `<li class="work col-4 col-lg-2 col-sm-4">
                            <div class="work_pic" @click="openWorkModal">
                                <img :src="img" class="" :data-price="workTotalPrice" :data-index="workIndex">
                            </div>

                            <div class="work_author">
                                <img src="./assets/img/pic/userPic.png" class="userPic">
                                <div class="userContent">
                                    <p class="userName h6">矛盾的小女子</p>
                                    <h2 class="workName h4" :v-text="workTitle">{{workTitle}}</h2>
                                    <p class="userContent h5">這是一隻天栗鼠，這不是一隻天栗鼠，這到底是不是一隻天栗鼠？</p>
                                    <div class="other">
                                        <p class="postTime mainTime h6" :v-text="postTime">{{postTime}}小時前</p>
                                        <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                    </div>
                                </div>
                            </div>

                            <div class="workInfo">
                                <div class="workInfo_good">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon goodIcon" @mouseover="coloredIcon" @mouseout="noColorIcon" @click="addGoodNum">
                                        <g transform="translate(-729 -275)">
                                          <path d="M14.513,37.47l10.1.209c4.043,0,8.616-5.286,9.752-7.915,0,0,3.514-7.2,2.541-12.055-1.78-3.084-4.026-2.219-13.046-2.219l1.545-7,.052-.515a2.489,2.489,0,0,0-.713-1.743L23.013,4.5,12.194,15.43a3.3,3.3,0,0,0-.944,2.327V34.241A3.237,3.237,0,0,0,14.513,37.47Z" transform="translate(735.366 280.5)" fill="none" stroke="#E59807" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" :class="{'pin--secondary':is_icon_color === true}"/>
                                          <path d="M3.375,15.75H8.87V34.982H3.375Z" transform="translate(733.625 282.987)" fill="#E59807" :class="{'pin--secondary':is_icon_color === true}"/>
                                        </g>
                                    </svg>
                                    <p  class="num h3" :v-text="goodNum">{{goodNum_plus}}</p>
                                </div>
                                <div class="workInfo_reply">                                   
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon commentIcon">
                                        <g transform="translate(-396.868 -362.313)">
                                          <path  d="M413.686,374.254c-8.888,0-16.12,6.165-16.12,13.743a12.384,12.384,0,0,0,3.545,8.634l0,0,0,0a5.214,5.214,0,0,1,1.473,3.662,6.52,6.52,0,0,1,2-.328,5.51,5.51,0,0,1,2.032.38h.006a18.861,18.861,0,0,0,7.058,1.389c8.888,0,16.12-6.165,16.12-13.745s-7.232-13.743-16.12-13.743m0-4.666c11.479,0,20.786,8.242,20.786,18.41s-9.307,18.411-20.786,18.411a23.417,23.417,0,0,1-8.774-1.716.893.893,0,0,0-.322-.055c-1.569,0-4.921,3.126-6.8,3.126a1.16,1.16,0,0,1-.7-.209c-1.973-1.66,1.569-6.761.7-7.646A17.091,17.091,0,0,1,392.9,388C392.9,377.83,402.206,369.588,413.686,369.588Z" transform="translate(8.967 -0.274)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(413 386)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(420 386)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(427 386)" fill="#E59807"/>
                                        </g>
                                    </svg>
                                    <p  class="num h3">{{commentNum_plus}}</p>
                                </div>
                            </div>

                            <div class="work_reply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png" class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="other">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4 h5 replyComment">回覆</button>
                                                <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="typeSubReply" v-if="this.memberId != null && this.memberId != ''">
                                    <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">
    
                                    <div class="typeReply_right">
                                        <p class="replyerName">沾醬大師</p>
                                        <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                        <div class="other">
                                            <p class="textCount"></p>
                                            <button class="btn btn--small h5 subComment" @click="postSubComment">回覆</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="moreReply hiddenMR" @click="openMoreReply">
                                <p class="h5 moreReplyWord text-coffee">1則回覆</p>
                                <img src="./assets/img/icon/icon-down.svg" class="icon toggleIcon1">
                            </div>
                            <div class="readMore" @click="openReadMore">
                                <p class="h5 readMoreWord text-coffee">閱讀更多</p>
                                <img src="./assets/img/icon/icon-down.svg" class="icon toggleIcon2">
                            </div>

                            <div class="typeReply" v-if="this.memberId != null && this.memberId != ''">
                                <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">

                                <div class="typeReply_right">
                                    <p class="replyerName">沾醬大師</p>
                                    <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                    <div class="other">
                                        <p class="textCount"></p>
                                        <button class="btn btn--small h5 comment" @click="postComment">留言</button>
                                    </div>
                                </div>
                            </div>
                        </li>`,
      methods: {
        coloredIcon(e) {
          this.is_icon_color = true
        },
        noColorIcon(e) {
          this.is_icon_color = false
        },
        openReportModal() {
          console.log('report!')
            // this.isReportModalShow = true; //暫時關掉
          bus.$emit('report-emit')
        },
        addGoodNum(e) {
          // console.log('345345')
          this.goodNum_plus += 1;
          // console.log(this.goodNum_plus)
          // ajax
        },
        openWorkModal(e) {
          //進入彈窗
          bus.$emit('work-modal-emit')

          // --------------------------------------------------------------
          smallCardPicURL = $(this.$el).children('.work_pic').children('img').attr('src');
          // console.log(smallCardPicURL)
          this.workImgURL = smallCardPicURL;

          let smallCardPrice = $(this.$el).attr('value');
          // console.log(smallCardPrice)
          this.workPrice = smallCardPrice;


          let smallCardGoodNum = $(this.$el).children('.workInfo').children('.workInfo_good').children('.num').text();
          // console.log(smallCardGoodNum)
          this.workGood = parseInt(smallCardGoodNum)


          let smallCardCommentNum = $(this.$el).children('.workInfo').children('.workInfo_reply').children('.num').text();
          // console.log(smallCardCommentNum)
          this.workComment = smallCardCommentNum

          //全域變數，用來判定打開work-modal時要帶入哪個work-card的資料
          smallCardId = $(this.$el).attr('data-id');
          // console.log(smallCardId)
        },
        openMoreReply(e) {
          $(this.$el).children('.work_reply').children('.hiddenSubReply').slideToggle();
          $(this.$el).children('.work_reply').children('.hiddenSubReply').css({
            "display": "flex",
          });
          this.count1 += 1;
          // console.log(count1);

          if (this.count1 % 2 == 1) {
            // console.log(this.count1)
            $(this.$el).children('.moreReply').children('.moreReplyWord').text('關閉子回覆');

            $(this.$el).children('.moreReply').children('.toggleIcon1').css({
              "transform": "rotate(180deg)",
            })
          } else {
            // console.log(this.count1)

            $(this.$el).children('.moreReply').children('.moreReplyWord').text('1則回覆');

            $(this.$el).children('.moreReply').children('.toggleIcon1').css({
              "transform": "rotate(0deg)",
            })
          }
        },
        openReadMore() {
          $(this.$el).children('.hiddenReply').slideToggle();
          $(this.$el).children('.hiddenReply').css({
            "display": "block"
          });

          this.count2 += 1;
          // console.log(count2);

          if (this.count2 % 2 == 1) {
            $(this.$el).children('.readMore').children('.readMoreWord').text('關閉更多');
            $(this.$el).children('.readMore').children('.toggleIcon2').css({
              "transform": "rotate(180deg)",
            })
          } else {
            $(this.$el).children('.readMore').children('.readMoreWord').text('閱讀更多');
            $(this.$el).children('.readMore').children('.toggleIcon2').css({
              "transform": "rotate(0deg)",
            })
          }
        },
        postComment(e) {
          let commentContentL = $(e.target).parent().parent().children('.textarea').val().length;
          // let commentContentL = $(e.target).parent().parent().children('.textarea').text().length;
          // console.log(commentContentL)
          if (commentContentL > 0) {
            this.commentNum_plus += 1;

          }
        },
        postSubComment(e) { //PO回覆的回覆
          //    console.log('subComment is clicked')
          let commentContentL = $(e.target).parent().parent().children('.textarea').val().length;
          let commentContent = $(e.target).parent().parent().children('.textarea').val();
          //    console.log(commentContentL)

          let replyerPic = $(e.target).parent().parent().parent().children('.replyerPic').attr('src');
          //    console.log(replyerPic)

          let replyerName = $(e.target).parent().parent().children('.replyerName').text();
          //    console.log(replyerName)

          if (commentContentL > 0) {
            $(e.target).parent().parent().parent().parent().children('.userContext').after(`
                            <div class="subUserContext hiddenSubReply">
                                <img src="${replyerPic}"  class="userPic">
                                <div class="userContext_top">
                                    <p class="userName h6">${replyerName}</p>
                                    <p class="userContent h5">${commentContent}</p>
                                    
                                    <div class="other">
                                        <p class="postTime h6">0小時前</p>
                                        <div>                                
                                            <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `)

            $(e.target).parent().parent().children('.textarea').val('');
            $(e.target).parent().children('.textCount').text(`餘${textMax}字`);
          }

          //PO完後關掉回覆的回覆
          $('.typeSubReply').css({
            "display": "none"
          });

          //PO完後出現「X則回覆」
          $(e.target).parent().parent().parent().parent().parent().children('.hiddenMR').css({
            "display": "flex"
          });
        },

      },
      mounted() {

      },
      updated() {
        // this.isMemberIdExist = true;

      },
      store,
      computed: {
        //從store裡拿東西出來
        memberId() {
          return this.$store.state.memberId;

        }
      },

    })

    Vue.component(('work-card2'), {
      props: {
        workTitle: {
          default: "天栗鼠計程車",
          type: String
        },
        img: {
          default: "./assets/img/pic/model06.png",
          type: String
        },
        goodNum: {
          default: 18,
          type: Number
        },
        commentNum: {
          default: 2,
          type: Number
        },
        postTime: {
          default: 1,
          type: Number
        },
        workTotalPrice: {
          default: 100,
          type: Number
        },
      },
      data() {
        return {
          count1: 0,
          count2: 0,
          is_icon_color: false,
          goodNum_plus: this.goodNum,
          commentNum_plus: this.commentNum,
          isReportModalShow: false,

        }
      },
      template: `<li class="work col-4 col-lg-2 col-sm-4">
                            <div class="work_pic" @click="openWorkModal">
                                <img :src="img" class="model" @click="openWorkModal">
                            </div>

                            <div class="work_author">
                                <img src="./assets/img/pic/userPic.png" class="userPic">
                                <div class="userContent">
                                    <p class="userName h6">矛盾的小女子</p>
                                    <h2 class="workName h4">天栗鼠計程車</h2>
                                    <p class="userContent h5">這是一隻天栗鼠，這不是一隻天栗鼠，這到底是不是一隻天栗鼠？</p>
                                    <div class="other">
                                        <p class="postTime mainTime h6" :v-text="postTime">{{postTime}}小時前</p>
                                        <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                    </div>
                                </div>
                            </div>

                            <div class="workInfo">
                                <div class="workInfo_good">
                                    
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon goodIcon" @click="addGoodNum" @mouseover="coloredIcon" @mouseout="noColorIcon">
                                        <g transform="translate(-729 -275)">
                                          <path d="M14.513,37.47l10.1.209c4.043,0,8.616-5.286,9.752-7.915,0,0,3.514-7.2,2.541-12.055-1.78-3.084-4.026-2.219-13.046-2.219l1.545-7,.052-.515a2.489,2.489,0,0,0-.713-1.743L23.013,4.5,12.194,15.43a3.3,3.3,0,0,0-.944,2.327V34.241A3.237,3.237,0,0,0,14.513,37.47Z" transform="translate(735.366 280.5)" fill="none" stroke="#E59807" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" :class="{'pin--secondary':is_icon_color === true}"/>
                                          <path d="M3.375,15.75H8.87V34.982H3.375Z" transform="translate(733.625 282.987)" fill="#E59807" :class="{'pin--secondary':is_icon_color === true}"/>
                                        </g>
                                    </svg>
                                    <p  class="num h3">{{goodNum_plus}}</p>
                                </div>
                                <div class="workInfo_reply">
                                    
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon commentIcon">
                                        <g transform="translate(-396.868 -362.313)">
                                          <path  d="M413.686,374.254c-8.888,0-16.12,6.165-16.12,13.743a12.384,12.384,0,0,0,3.545,8.634l0,0,0,0a5.214,5.214,0,0,1,1.473,3.662,6.52,6.52,0,0,1,2-.328,5.51,5.51,0,0,1,2.032.38h.006a18.861,18.861,0,0,0,7.058,1.389c8.888,0,16.12-6.165,16.12-13.745s-7.232-13.743-16.12-13.743m0-4.666c11.479,0,20.786,8.242,20.786,18.41s-9.307,18.411-20.786,18.411a23.417,23.417,0,0,1-8.774-1.716.893.893,0,0,0-.322-.055c-1.569,0-4.921,3.126-6.8,3.126a1.16,1.16,0,0,1-.7-.209c-1.973-1.66,1.569-6.761.7-7.646A17.091,17.091,0,0,1,392.9,388C392.9,377.83,402.206,369.588,413.686,369.588Z" transform="translate(8.967 -0.274)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(413 386)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(420 386)" fill="#E59807"/>
                                          <circle cx="2.4" cy="2.4" r="2.4" transform="translate(427 386)" fill="#E59807"/>
                                        </g>
                                    </svg>
                                    <p  class="num h3">{{commentNum_plus}}</p>
                                </div>
                            </div>

                            <div class="work_reply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png" class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="other">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4 h5 replyComment">回覆</button>
                                                <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="typeSubReply" v-if="this.memberId != null && this.memberId != ''">
                                    <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">
    
                                    <div class="typeReply_right">
                                        <p class="replyerName">沾醬大師</p>
                                        <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                        <div class="other">
                                            <p class="textCount"></p>
                                            <button class="btn btn--small h5 subComment" @click="postSubReply">回覆</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="subUserContext">
                                    <img src="./assets/img/pic/userPic03.png" class="userPic--small">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅不好吃</p>
                                        <p class="userContent h5">超油</p>
                                        <div class="other">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4 h5 replyComment">回覆</button>
                                                <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="subUserContext hiddenSubReply">
                                    <img src="./assets/img/pic/userPic03.png" class="userPic--small">
                                    <div class="userContext_top">
                                        <p class="userName h6">油炸退散</p>
                                        <p class="userContent h5">明明就不好吃</p>
                                        <div class="other">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                
                                                <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="moreReply" @click="openMoreReply">
                                <p class="h5 moreReplyWord text-coffee">1則回覆</p>
                                <img src="./assets/img/icon/icon-down.svg" class="icon toggleIcon1">
                            </div>

                            <div class="work_reply hiddenReply">
                                <div class="userContext">
                                    <img src="./assets/img/pic/userPic02.png" class="userPic">
                                    <div class="userContext_top">
                                        <p class="userName h6">天婦羅好好吃</p>
                                        <p class="userContent h5">天婦羅好好吃</p>
                                        <div class="other">
                                            <p class="postTime h6">3小時前</p>
                                            <div>                                
                                                <button class="btn btn--link mr-4 h5 replyComment">回覆</button>
                                                <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="typeSubReply" >
                                    <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">
    
                                    <div class="typeReply_right">
                                        <p class="replyerName">沾醬大師</p>
                                        <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                        <div class="other">
                                            <p class="textCount"></p>
                                            <button class="btn btn--small h5 subComment">回覆</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="readMore" @click="openReadMore">
                                <p class="h5 readMoreWord text-coffee">閱讀更多</p>
                                <img src="./assets/img/icon/icon-down.svg" class="icon toggleIcon2">
                            </div>
                            <div class="typeReply" v-if="this.memberId != null && this.memberId != ''">
                                <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">

                                <div class="typeReply_right">
                                    <p class="replyerName">沾醬大師</p>
                                    <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                    <div class="other">
                                        <p class="textCount"></p>
                                        <button class="btn btn--small h5 comment" @click="postComment">留言</button>
                                    </div>
                                </div>
                            </div>
                        </li>`,
      methods: {
        coloredIcon(e) {
          this.is_icon_color = true
        },
        noColorIcon(e) {
          this.is_icon_color = false
        },
        openReportModal() {
          console.log('report!')
          bus.$emit('report-emit')
        },
        addGoodNum(e) {
          this.goodNum_plus += 1;

        },
        openWorkModal(e) { //這是work-card2
          //進入彈窗
          bus.$emit('work-modal-emit');

          // --------------------------------------------------------------
          smallCardPicURL = $(this.$el).children('.work_pic').children('img').attr('src');
          // console.log(smallCardPicURL)
          this.workImgURL = smallCardPicURL;

          let smallCardPrice = $(this.$el).attr('value');
          // console.log(smallCardPrice)
          this.workPrice = smallCardPrice;


          let smallCardGoodNum = $(this.$el).children('.workInfo').children('.workInfo_good').children('.num').text();
          // console.log(smallCardGoodNum)
          this.workGood = parseInt(smallCardGoodNum);


          let smallCardCommentNum = $(this.$el).children('.workInfo').children('.workInfo_reply').children('.num').text();
          // console.log(smallCardCommentNum)
          this.workComment = smallCardCommentNum;

          smallCardId = $(this.$el).attr('data-id');
          // console.log(smallCardId)
          // $('.addToCart').attr('data-id', smallCardId)
          // this.workId = smallCardId
        },
        openMoreReply() {
          $(this.$el).children('.work_reply').children('.hiddenSubReply').slideToggle();
          $(this.$el).children('.work_reply').children('.hiddenSubReply').css({
            "display": "flex",
          });
          this.count1 += 1;
          // console.log(count1);

          if (this.count1 % 2 == 1) {
            // console.log(this.count1)
            $(this.$el).children('.moreReply').children('.moreReplyWord').text('關閉子回覆');

            $(this.$el).children('.moreReply').children('.toggleIcon1').css({
              "transform": "rotate(180deg)",
            })
          } else {
            // console.log(this.count1)

            $(this.$el).children('.moreReply').children('.moreReplyWord').text('1則回覆');

            $(this.$el).children('.moreReply').children('.toggleIcon1').css({
              "transform": "rotate(0deg)",
            })
          }
        },
        openReadMore() {
          $(this.$el).children('.hiddenReply').slideToggle();
          $(this.$el).children('.hiddenReply').css({
            "display": "block"
          });

          this.count2 += 1;
          // console.log(count2);

          if (this.count2 % 2 == 1) {
            $(this.$el).children('.readMore').children('.readMoreWord').text('關閉更多');
            $(this.$el).children('.readMore').children('.toggleIcon2').css({
              "transform": "rotate(180deg)",
            })
          } else {
            $(this.$el).children('.readMore').children('.readMoreWord').text('閱讀更多');
            $(this.$el).children('.readMore').children('.toggleIcon2').css({
              "transform": "rotate(0deg)",
            })
          }
        },
        postComment(e) {
          let commentContentL = $(e.target).parent().parent().children('.textarea').val().length;
          // let commentContentL = $(e.target).parent().parent().children('.textarea').text().length;
          // console.log(commentContentL)
          if (commentContentL > 0) {
            this.commentNum_plus += 1;
          }
        },
        postSubReply(e){
          let commentContentL = $(e.target).parent().parent().children('.textarea').val().length;
          let commentContent = $(e.target).parent().parent().children('.textarea').val();

          let replyerPic = $(e.target).parent().parent().parent().children('.replyerPic').attr('src');

          let replyerName = $(e.target).parent().parent().children('.replyerName').text();

          if (commentContentL > 0) {
            $(e.target).parent().parent().parent().parent().children('.subUserContext:last-child').after(`
                            <div class="subUserContext hiddenSubReply">
                                <img src="${replyerPic}"  class="userPic">
                                <div class="userContext_top">
                                    <p class="userName h6">${replyerName}</p>
                                    <p class="userContent h5">${commentContent}</p>
                                    
                                    <div class="other">
                                        <p class="postTime h6">0小時前</p>
                                        <div>                                
                                            <button class="btn btn--link report h5" @click="openReportModal">檢舉</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `)

            $(e.target).parent().parent().children('.textarea').val('');
            // $(e.target).parent().children('.textCount').text(`餘${textMax}字`);
          }

          //PO完後關掉回覆的回覆
          $('.typeSubReply').css({
            "display": "none"
          });

          //PO完後出現「X則回覆」
          $(e.target).parent().parent().parent().parent().parent().children('.hiddenMR').css({
            "display": "flex"
          });
        }
      },
      store,
      computed: {
        //從store裡拿東西出來
        memberId() {
          return this.$store.state.memberId;

        }
      },
    })

    const vm1 = new Vue({ //主體
      el: '#factory',
      props: {
        memberid_exist: {
          defautl: false,
          type: Boolean
        }
      },
      data: {
        countStep: 0,
        countR: 0,
        countL: 0,
        docW: $(document).width(),
        shapeIndex: -1,
        circleIndex: -1,
        isModalShow: false,
        isModalShow2: false,
        addGoodNum: null,
        filterContext: null,
      },
      methods: {
        showWorks(e) { //點選大家的作品時會標示在哪裡，大家作品會出現、我的作品會隱藏
          $(e.target).css({
            "background": "linear-gradient(transparent 60%, #FADD61 60%)"
          });

          $('.workButton').not(e.target).css({
            "background": "none"
          });

          $('.othersWorks').css({
            "display": "flex"
          });
          $('.mywork').css({
            "display": "none"
          });
        },
        showMywork(e) { //點選我的作品時會標示在哪裡，我的作品會出現、大家作品會隱藏
          $(e.target).css({
            "background": "linear-gradient(transparent 60%, #FADD61 60%)"
          });

          $('.workButton').not(e.target).css({
            "background": "none"
          });

          $('.othersWorks').css({
            "display": "none"
          });
          $('.mywork').css({
            "display": "block"
          });
        },
        make(e) { //點開始製作後出現製作區域、順便清空整個canvas
          $('.previousStep').addClass('invisible');

          $('.progressBar').css({
            "display": "block"
          });

          $('.circle:first').css({
            "background-color": "#E59807"
          });

          $('.intro').css({
            "display": "none"
          });

          $('.makeCar').css({
            "display": "block"
          });

          // console.log('清空空')
          context.clearRect(0, 0, 400, 200);
          contextA1.clearRect(0, 0, 400, 200);
          contextA2.clearRect(0, 0, 400, 200);
          contextA3.clearRect(0, 0, 400, 200);
          $(e.target).removeClass('finish');
        },
        closeModal() { //關掉彈窗
          // console.log('關掉')
          this.isModalShow = false;
        },
        toNextStep() { //點下一步進到下一個步驟、最後一步時生成base64
          this.countStep += 1;
          // console.log(this.countStep)

          if (this.countStep & 5 > 0) {
            $('.putMemberId').val(this.$store.state.memberId);
          }
          // console.log("nextStep is clicked! countStep: "+ this.countStep)
        },
        toPreviousStep() { //點上一步回上一步
          this.countStep -= 1;
          // console.log('上');
          console.log(this.countStep);
          // // console.log("previousStep is clicked! countStep: " + this.countStep)
        },
        getCircleIndex(e) {
          circleIndex = $(e.target).parent().index();
          // console.log("circleIndex: " + circleIndex);
        },
        moveRight() {
          this.countL += 1;

          let distanceToLeft = $('.selectArea').position().left;
          console.log(distanceToLeft);
          console.log(this.countStep);

          if (this.docW <= 992) {
            if (this.countStep < 3 && distanceToLeft > -430) {
              // console.log('R1');
              $('.selectArea').animate({
                left: '-=430'
              });
            } else if (this.countStep == 3 && distanceToLeft > -2100) {
              // console.log('R2');
              $('.selectArea').animate({
                left: '-=410'
              });
            }
          } else {
            if (this.countStep < 3 && distanceToLeft > 10) {
              // console.log('L1')
              $('.selectArea').animate({
                left: '-=410'
              });
            } else if (this.countStep >= 3 && distanceToLeft > -500) {
              // console.log('L2')
              $('.selectArea').animate({
                left: '-=410'
              });
            }
          }
        },
        moveLeft() {
          this.countR += 1;
          // console.log('countR: '+ this.countR);
          // console.log('docW: '+ docW)

          let shapeLength = $('.shapeCard').length;
          // console.log(shapeLength)

          let colorLength = $('.selectColor').length;
          // console.log(colorLength)
          // console.log("countStep:  " + countStep)

          let distanceToLeft = $('.selectArea').position().left;
          console.log(distanceToLeft);

          if (this.docW <= 992) {
            if (this.countStep == 0 && distanceToLeft < 3) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 1 && distanceToLeft < 3 && distanceToLeft > (-1300)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 2 && distanceToLeft < 3 && distanceToLeft > (-1300)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 3 && distanceToLeft < 14 && distanceToLeft > (-2100)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            }
          } else {
            if (this.countStep == 0 && distanceToLeft < 14) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 1 && distanceToLeft < 14 && distanceToLeft > (-400)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 2 && distanceToLeft < 14 && distanceToLeft > (-400)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            } else if (this.countStep == 3 && distanceToLeft < 14 && distanceToLeft > (-920)) {
              $('.selectArea').animate({
                left: '+=410'
              });
            }
          }
        },
        openReportModal(isModalShow) {
          this.isModalShow = isModalShow;
        },
        addgoodNum() {
          this.goodNum += 1;
        },
        // sort(){
        //     this.filterContext = $('.filter').val();
        //     // console.log(this.filterContext)
        //     let timeArr = [];
        //     for(let i = 0; i < $('.work').length; i++){
        //             let option = $(`.work:eq(${i})`).children('.work_author').children('.userContent').children('.other').children('.mainTime').text().split('小時前')[0];
        //             optionF = parseInt(option)
        //             // console.log(optionF)

        //             timeArr.push(optionF)
        //             newArrSort = timeArr.sort(function(n1, n2){
        //                 return n1 < n2 ? -1 : 1;
        //             }); //最終結果為[1,4,4,7,15,26]
        //             // console.log(newArrSort)

        //             index = newArrSort.indexOf(newArrSort[i])
        //             // console.log(index)

        //             if(this.filterContext == '按作品新到舊'){
        //                 $('.work')
        //             }
        //     }

        //     if(this.filterContext == '按作品新到舊'){
        //         $('.work')

        //         // if(index == 0){
        //         //     $(`.work:eq(${index})`).css({"order":5}) //15
        //         // }else if(index == 1){
        //         //     $(`.work:eq(${index})`).css({"order":1}) //1
        //         // }else if(index == 2){
        //         //     $(`.work:eq(${index})`).css({"order":3}) //4
        //         // }else if(index == 3){
        //         //     $(`.work:eq(${index})`).css({"order":4}) //7
        //         // }else if(index == 4){
        //         //     $(`.work:eq(${index})`).css({"order":2}) //4
        //         // }else if(index == 5){
        //         //     $(`.work:eq(${index})`).css({"order":6}) //26
        //         // }
        //     }

        // }
      },
      store,
      computed: {
        //從store裡拿東西出來
        memberId() {
          return this.$store.state.memberId;

        }
      },
      mounted() { //這裡
        if (this.$store.state.memberId != null) {
          this.memberid_exist = true;
          // console.log('ddd')
        }
      },
      updated() {

      },


    });

    new Vue({ //主體
      el: '#factoryModal',
      props: {
        img: {
          default: "./assets/img/pic/model04.png",
          type: String
        },
      },
      data: {
        is_icon_color: false,
        goodNum_plus: this.goodNum,
        commentNum_plus: this.commentNum
      },

      methods: {
        closeWorkModal() { //關掉彈窗
          $('.mask').css({
            "display": "none",
          });

          $('#factoryModal').css({
            "margin": "0 auto",
          });
        },
        coloredIcon(e) {
          this.is_icon_color = true

          // console.log('變色囉')
          // $(e.target).children('g').children('path').addClass('pin--secondary')            
        },
        noColorIcon(e) {
          this.is_icon_color = false
            // console.log('變回去囉')
            // $(e.target).children('g').children('path').removeClass('pin--secondary')  
        },
        addGoodNum(e) {
          this.goodNum_plus += 1;

          // ajax
        },
        closeModal() {
          // console.log('關掉喔')
          // $('.modal').removeClass('modal-active');
          $('.modal').css({
            "display": "none"
          });
        }
      },
    });


    new Vue({ //設定進度條的作用域
      el: '#progressBar',
    });

    let empty = new Vue({ //設定empty-state的作用域
      el: '#mywork',
    })

    // ----------------------JQ區----------------------
    //計算輸入框內的剩餘字數，按進去沒輸入字變紅框
    let textMax = 100;
    $('.textCount').text(`餘${textMax}字`);

    $('textarea').keyup(function() {
      let textLength = $(this).val().length;
      // console.log(textLength)

      $(this).parent().children('.other').children('.textCount').text(`餘${textMax - textLength}字`);

      if (textLength > 0) {
        $(this).css({
          "border": "1px solid #000",
        })
      }
    })

    //選擇後「下一步」變able、提醒先做選則才進入下一步的提示消失
    // 選擇的項目標示顏色、單選的情況其他沒選的不標色
    $('.selectShape').click(() => {
      $('.nextStep').removeClass('btn--disabled')
      $('.pleaseSelect').css({
        "display": "none"
      })

      $(this).removeClass('btn--outline')

      $(this).parent().siblings().children('.btn').addClass('btn--outline')
    })

    $('.selectColor').click(() => {
      $('.nextStep').removeClass('btn--disabled')
      $('.pleaseSelect').css({
        "display": "none"
      })

      $(this).removeClass('btn--outline')

      $(this).parent().siblings().children('.btn').addClass('btn--outline')
    })

    $('.selectTire').click(() => {
      $('.nextStep').removeClass('btn--disabled')
      $('.pleaseSelect').css({
        "display": "none"
      })

      $(this).removeClass('btn--outline')

      $(this).parent().siblings().children('.btn').addClass('btn--outline')
    })

    $('.selectAccessory').click(() => {
      $('.nextStep').removeClass('btn--disabled')
      $('.pleaseSelect').css({
        "display": "none"
      })
    })

    let countStep = 0;
    let docW = $(document).width();

    //到下一步
    $('.nextStep').click(() => {
      // console.log("nextStep is clicked! countStep: "+ countStep)
      // console.log(docW)

      if ($('.nextStep').hasClass('btn--disabled')) { //如果下一步還是灰色的，提示出現，1秒後關掉提示

        $('.pleaseSelect').css({
          "display": "block"
        })

        setTimeout(() => {
          $('.pleaseSelect').css({
            "display": "none"
          })
        }, 1000);
      } else { //如果下一步可以按了
        $('.previousStep').removeClass('invisible')

        countStep += 1;
        $('.shapeCard').css({
          "display": "none"
        })
        $('.selectArea').css({
          "left": 0
        })

        if (countStep % 5 == 1) {
          // console.log(countStep)
          $('.nextStep').addClass('btn--disabled')

          //進入選顏色
          $('.colorCards').css({
            "display": "flex"
          })
          $('.colorCard').css({
            "display": "block"
          })

          //提醒內容變更
          $('.pleaseSelect').text('請先選擇烤漆才能進入下一步喔')

          //進度條、圓圈變色
          $('.content:nth-child(2) .circle').addClass('circle--able')
          $('.content:nth-child(2) .circle').addClass('circle--active')

          if (docW > 1003) {
            $('.bar-front').width(240)
          } else if (docW <= 1003) {
            $('.bar-front').width(220)
          }

        } else if (countStep % 5 == 2) {
          // console.log(countStep)

          $('.nextStep').addClass('btn--disabled')

          //進入選輪子
          $('.colorCard').css({
            "display": "none"
          })

          $('.tireCards').css({
            "display": "flex"
          })
          $('.tireCard').css({
            "display": "block"
          })

          //提醒內容變更
          $('.pleaseSelect').text('請先選擇輪胎才能進入下一步喔')

          //進度條變色
          $('.content:nth-child(3) .circle').addClass('circle--able')
          $('.content:nth-child(3) .circle').addClass('circle--active')

          if (docW > 1003) {
            $('.bar-front').width(480)
          } else if (docW <= 1003) {
            $('.bar-front').width(440)
          }

        } else if (countStep % 5 == 3) {
          postTime = new Date().getTime();
          // console.log(postTime)

          if (shapeIndex != 0) {
            console.log('讓尾翼不能選')
            $('.selectA6').addClass('btn--disabled')
            $('.selectA6').removeClass('btn--outline')
            $('.selectA6').css({
              "pointer-events": "none"
            })
          }

          $('.nextStep').addClass('btn--disabled')

          //進入選配件
          $('.tireCard').css({"display": "none"})

          //提醒內容變更
          $('.pleaseSelect').text('請先選擇配件才能進入下一步喔')

          $('.accessoryCards').css({"display": "flex"})
          $('.accessoryCard').css({"display": "block"})

          //設置textarea預設文字
          $('.typeInspiration').text('這是我的第一個作品')

          //進度條、圓圈變色
          $('.content:nth-child(4) .circle').addClass('circle--able')
          $('.content:nth-child(4) .circle').addClass('circle--active')

          if (docW > 1003) {
            $('.bar-front').width(730)
          } else if (docW <= 1003) {
            $('.bar-front').width(660)
          }

        } else if (countStep % 5 == 4) {
          $('.putDataId').val(`${postTime}`)
          $('.putPrice').val(`${stage4Price}`)
          $('.putAllIndex').val(`${allIndex}`)

          //在.putImgPath設置val，之後寫進product_img用  //2個==不是不會比較型別嗎?
          if (allIndex == '000023' || allIndex == '000032') {
            $('.putImgPath').attr('value', './assets/img/pic/model001.png')
          } else if (allIndex == '00401') {
            $('.putImgPath').val('./assets/img/pic/model002.png')
          } else if (allIndex == '22234' || allIndex == '33234' || allIndex == '22243' || allIndex == '33243') {
            $('.putImgPath').attr('value', './assets/img/pic/model003.png')
          }

          $('.nextStep').addClass('btn--disabled').text('完成')
          $('.nextStep').addClass('finish')

          $('.selectArea').css({
            "display": "none"
          })

          $('.giveName').css({
            "display": "flex",
            "justify-content": "space-between"
          })

          //左右紐消失
          $('.selectBtn').css({
            "display": "none"
          })

          //提醒內容變更
          $('.pleaseSelect').text('請先填寫完資料才能完成作品喔')

          //進度條、圓圈變色
          $('.content:nth-child(5) .circle').addClass('circle--able')
          $('.content:nth-child(5) .circle').addClass('circle--active')

          if (docW > 1003) {
            $('.bar-front').width(960)
          } else if (docW <= 1003) {
            $('.bar-front').width(840)
          }
          //base64
          dataURL = document.querySelector('.canvas').toDataURL();
          dataURLA1 = document.querySelector('.canvasA1').toDataURL();
          dataURLA2 = document.querySelector('.canvasA2').toDataURL();
          dataURLA3 = document.querySelector('.canvasA3').toDataURL();
          // console.log(dataURL)
        }
      }
    })


    //若沒有輸入所有資料跳出請完成資料輸入
    $('.nextStep').click(function() {
      typeWorkName = $('.typeWorkName').val() //設成全域，我的作品加入購物車時要抓
      let typeNickName = $('.typeNickName').val()
      let typeInspiration = $('.typeInspiration').val()

      let typeWorkNameL = $('.typeWorkName').val().length;
      let typeNickNameL = $('.typeNickName').val().length;
      let typeInspirationL = $('.typeInspiration').val().length;



      //如果作品名、作者暱稱、靈感皆不為空則PO文
      if (typeWorkNameL > 0 && typeNickNameL > 0 && typeInspirationL > 0) {
        let x = `<li class="work col-4 col-lg-2 col-sm-4" data-id=${allIndex} data-board-id=${postTime}>
                        <div class="work_pic">
                            <img src="data:image/png;${dataURL}" class="layer1">
                            <img src="data:image/png;${dataURLA1}" class="layer2">
                            <img src="data:image/png;${dataURLA2}" class="layer3">
                            <img src="data:image/png;${dataURLA3}" class="layer4">
                            <button class=" btn--publicMyWork h5">設為公開</button>
                        </div>

                        <div class="work_author">
                            <img src="./assets/img/pic/userPic.png"  class="userPic">
                            <div class="userContent">
                                <p class="userName h6">${typeNickName}</p>
                                <h2 class="workName h4">${typeWorkName}</h2>
                                <p class="userContent h5">${typeInspiration}</p>
                                <textarea name="" id="" cols="24" rows="5" placeholder="${typeInspiration}" class="textarea editTextArea"></textarea>
                                <div class="other">
                                    <p class="postTime h6">0小時前</p>
                                    <div class="other_right">
                                        <button class="btn btn--link h5 mr-4 addToCart">加入購物車</button>
                                        <button class="btn btn--link h5 mr-4 edit">編輯</button>
                                        <button class="btn btn--link h5 delete">刪除</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="workInfo">
                            <div class="workInfo_good">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon goodIcon">
                                    <g transform="translate(-729 -275)">
                                        <path d="M14.513,37.47l10.1.209c4.043,0,8.616-5.286,9.752-7.915,0,0,3.514-7.2,2.541-12.055-1.78-3.084-4.026-2.219-13.046-2.219l1.545-7,.052-.515a2.489,2.489,0,0,0-.713-1.743L23.013,4.5,12.194,15.43a3.3,3.3,0,0,0-.944,2.327V34.241A3.237,3.237,0,0,0,14.513,37.47Z" transform="translate(735.366 280.5)" fill="none" stroke="#E59807" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"/>
                                        <path d="M3.375,15.75H8.87V34.982H3.375Z" transform="translate(733.625 282.987)" fill="#E59807"/>
                                    </g>
                                </svg>
                                <p  class="num h3">0</p>
                            </div>
                            <div class="workInfo_reply">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 52 52" class="icon commentIcon">
                                    <g transform="translate(-396.868 -362.313)">
                                        <path  d="M413.686,374.254c-8.888,0-16.12,6.165-16.12,13.743a12.384,12.384,0,0,0,3.545,8.634l0,0,0,0a5.214,5.214,0,0,1,1.473,3.662,6.52,6.52,0,0,1,2-.328,5.51,5.51,0,0,1,2.032.38h.006a18.861,18.861,0,0,0,7.058,1.389c8.888,0,16.12-6.165,16.12-13.745s-7.232-13.743-16.12-13.743m0-4.666c11.479,0,20.786,8.242,20.786,18.41s-9.307,18.411-20.786,18.411a23.417,23.417,0,0,1-8.774-1.716.893.893,0,0,0-.322-.055c-1.569,0-4.921,3.126-6.8,3.126a1.16,1.16,0,0,1-.7-.209c-1.973-1.66,1.569-6.761.7-7.646A17.091,17.091,0,0,1,392.9,388C392.9,377.83,402.206,369.588,413.686,369.588Z" transform="translate(8.967 -0.274)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(413 386)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(420 386)" fill="#E59807"/>
                                        <circle cx="2.4" cy="2.4" r="2.4" transform="translate(427 386)" fill="#E59807"/>
                                    </g>
                                </svg>
                                <p  class="num h3">0</p>
                            </div>
                        </div>

                        <div class="typeReply">
                            
                            <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">
        
                            <div class="typeReply_right">
                              <p class="replyerName">沾醬大師</p>
                              <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                              <div class="other">
                                <p class="textCount"></p>
                                <button class="btn btn--small h5 comment">留言</button>
                              </div>
                            </div>
                        </div>
                    </li>`

        //PO到我的車車
        $('.emptyState').css({
          "display": "none"
        })
        $('.mywork .putMywork').append(x)

        //PO完後清空填寫的資料
        $('.typeWorkName').val('')
        $('.typeNickName').val('')
        $('.typeInspiration').val('')

        //PO完回到第一頁
        $('.makeCar').css({
          "display": "none"
        })
        $('.giveName').css({
          "display": "none"
        })
        $('.selectArea').css({
          "display": "block"
        })
        $('.selectBtn').css({
          "display": "flex"
        })

        $('.shapeCards').css({
          "display": "flex"
        })
        $('.shapeCard').css({
          "display": "block"
        })

        $('.colorCards').css({
          "display": "none"
        })
        $('.tireCards').css({
          "display": "none"
        })
        $('.accessoryCards').css({
          "display": "none"
        })

        $('.intro').css({
          "display": "flex"
        })

        let count6 = 0;
        $('.closeTextarea').click(function() {
          // console.log('關掉textarea')
          $(this).parent().children('.typeReply').slideToggle();
          count6 += 1;
          // console.log(count6);
          if (count6 % 2 == 1) {
            $(this).children('.textareaWord').text('打開輸入框');
            $(this).children('.toggleIcon3').css({
              "transform": "rotate(180deg)",
            })
          } else {
            $(this).children('.textareaWord').text('關閉輸入框');
            $(this).children('.toggleIcon3').css({
              "transform": "rotate(0deg)",
            })
          }
        })

        //PO完後再跑一次這段，讓我的作品的goodIcon mouseover時有反應
        $('.goodIcon').mouseover((e) => {
          // console.log('變色')
          $(e.target).children('g').children('path').addClass('pin--secondary')
        })

        $('.goodIcon').mouseout((e) => {
          // console.log('變回去')
          $(e.target).children('g').children('path').removeClass('pin--secondary')
        })
      }
    })

    //在typeNickName、typeInspiration設置value
    $('.typeNickName').keyup((e) => {
      let nickName = $(e.target).val()
      $(e.target).attr('value', nickName)
    })

    $('.typeInspiration').keyup((e) => {
      let inspiration = $(e.target).val()
      $(e.target).attr('value', inspiration)
    })

    //回上一步
    $('.previousStep').click(() => { //移到這裡
      countStep -= 1
        // console.log("previousStep is clicked! countStep: " + this.countStep

      if (countStep % 5 == 0) { //console.log(sountStep)
        console.log('顏色消失，車型出現')
        $('.colorCards').css({
          "display": "none"
        })
        $('.shapeCards').css({
          "display": "flex"
        })
        $('.shapeCard').css({
          "display": "block"
        })

        // $('.content:nth-child(2) .circle').css({"background-color": "#D8D8D8"})//改這
        $('.content:nth-child(2) .circle').removeClass('circle--active')
        $('.content:nth-child(2) .circle').removeClass('circle--able')

        $('.previousStep').addClass('invisible')

        if (docW > 1003) {
          $('.bar-front').width(0)
        } else if (docW <= 1003) {
          $('.bar-front').width(0)
        }
      } else if (countStep % 5 == 1) {
        // console.log('輪子消失，顏色出現')
        $('.tireCards').css({
          "display": "none"
        })
        $('.colorCards').css({
          "display": "flex"
        })
        $('.colorCard').css({
          "display": "block"
        })
        $('.content:nth-child(3) .circle').removeClass('circle--active')
        $('.content:nth-child(3) .circle').removeClass('circle--able')
        $(this).removeClass('invisible')

        $('.nextStep').removeClass('btn--disabled')

        if (docW > 1003) {
          $('.bar-front').width(240)
        } else if (docW <= 1003) {
          $('.bar-front').width(220)
        }
      } else if (countStep % 5 == 2) {
        // console.log('配件消失，輪子出現')
        $('.accessoryCards').css({
          "display": "none"
        })
        $('.tireCards').css({
          "display": "flex"
        })
        $('.tireCard').css({
          "display": "block"
        })

        $('.content:nth-child(4) .circle').removeClass('circle--active')
        $('.content:nth-child(4) .circle').removeClass('circle--able')
        $('.nextStep').removeClass('btn--disabled')

        if (docW > 1003) {
          $('.bar-front').width(480)
        } else if (docW <= 1003) {
          $('.bar-front').width(440)
        }
      } else if (countStep % 5 == 3) {
        // console.log('giveName消失，配件出現')
        $('.giveName').css({
          "display": "none"
        })
        $('.selectArea').css({
          "display": "block"
        })
        $('.accessoryCards').css({
          "display": "flex"
        })
        $('.accessoryCard').css({
          "display": "block"
        })

        $('.content:nth-child(5) .circle').removeClass('circle--active')
        $('.content:nth-child(5) .circle').removeClass('circle--able')
        if (docW > 1003) {
          $('.bar-front').width(730)
        } else if (docW <= 1003) {
          $('.bar-front').width(660)
        }
      }
    })

    //完成資料輸入後按鈕自動變able、移除提示
    $('.giveName').keyup(function() {
      let typeWorkNameL = $('.typeWorkName').val().length;
      let typeNickNameL = $('.typeNickName').val().length;
      let typeInspirationL = $('.typeInspiration').val().length;

      console.log(typeWorkNameL)
      console.log(typeNickNameL)
      console.log(typeInspirationL)

      if (typeWorkNameL > 0 && typeNickNameL > 0 && typeInspirationL > 0) {
        $('.pleaseSelect').css({"display": "none"})
        $('.finish').removeClass('btn--disabled')
      }
    })

    //點到input裡面的字消失
    $('.typeNickName').click((e) => {
      $(e.target).val('')
      $('.finish').addClass('btn--disabled')
    })

    $('.typeInspiration').click((e) => {
      $(e.target).text('')
      $('.finish').addClass('btn--disabled')
    })

    //隨機取名
    $('.randomName').click(() => {
      let nameArr1 = ['地瓜', '蓮霧', '芋圓', '天竺鼠', '賓士貓', '長毛貓', '白襪貓', '短腿柯基', '犀牛', '脖子長長頸鹿']
      let nameArr2 = ['轎車', '跑車', '小客車', '巴士', '休旅車', '箱型車', '敞篷車', '公車', '警車', '消防車']

      let ran1 = Math.floor(Math.random() * 10)
      let ran2 = Math.floor(Math.random() * 10)

      $('.typeWorkName').val(nameArr1[ran1] + nameArr2[ran2])
      $('.typeWorkName').attr('value', nameArr1[ran1] + nameArr2[ran2])

      let typeWorkNameL = $('.typeWorkName').val().length;
      let typeNickNameL = $('.typeNickName').val().length;
      let typeInspirationL = $('.typeInspiration').val().length;

      console.log(typeWorkNameL)
      console.log(typeNickNameL)
      console.log(typeInspirationL)
      console.log('uuu')

      if (typeWorkNameL > 0 && typeNickNameL > 0 && typeInspirationL > 0) {
        $('.pleaseSelect').css({"display": "none"})
        $('.finish').removeClass('btn--disabled')
      }
    })

    //matches這段的意義是當點到document的時候會判定點到的東西是不是.replyComment或者他的子節點，
    //如果是的話執行if內的程式
    document.body.addEventListener('click', (e) => {
      const target = event.target
      if (target.matches(`.replyComment, .replyComment *`)) {
        // console.log('new node is clicked')
        $(e.target).parent().parent().parent().parent().parent().children('.typeSubReply').slideToggle();
        $(e.target).parent().parent().parent().parent().parent().children('.typeSubReply').css({
          "display": "flex"
        });
      }
    })

    //我的作品PO留言
    document.body.addEventListener('click', (e) => {
      const target = event.target
      if (target.matches(`.comment`)) {
        // console.log('this is my work comment')

        let textLength = $(e.target).parent().parent().children('.textarea').val().length;
        let commentContent = $(e.target).parent().parent().children('.textarea').val();
        let replyerPic = $(e.target).parent().parent().parent().children('.replyerPic').attr('src');
        // console.log(replyerPic)
        let replyerName = $(e.target).parent().parent().children('.replyerName').text();
        // console.log(replyerName
        if (textLength < 1) {
          // console.log('no textt')
          $(e.target).parent().parent().children('.textarea').css({
            "border": "1px solid red"
          })
        } else {
          // console.log('okk')
          $(e.target).parent().parent().children('.textarea').css({
            "border": "1px solid #000"
          })
          $(e.target).parent().parent().parent().parent().children(`.readMore`).before(`<div class="work_reply hiddenReply">
                            <div class="userContext">
                                <img src="${replyerPic}"  class="userPic">
                                <div class="userContext_top">
                                    <p class="userName h6">${replyerName}</p>
                                    <p class="userContent h5">${commentContent}</p>
                                    <div class="other">
                                        <p class="postTime h6">0小時前</p>
                                        <div>               
                                            <button class="btn btn--link mr-4 h5 replyComment">回覆</button>
                                            <button class="btn btn--link h5 report" @click="openReportModal">檢舉</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="typeSubReply">
                                <img src="./assets/img/pic/userPic.png" class="userPic replyerPic">
                                <div class="typeReply_right">
                                    <p class="replyerName">沾醬大師</p>
                                    <textarea name="" id="" cols="24" rows="5" placeholder="讚美這個作品，或發表看法。" class="textarea"></textarea>
                                    <div class="other">
                                        <p class="textCount"></p>
                                        <button class="btn btn--small h5 subComment" @click="postSubComment">回覆</button>
                                    </div>
                                </div>
                            </div>
                        </div>`)

          $(e.target).parent().parent().children('.textarea').val('');
          $(e.target).parent().children('.textCount').text(`餘${textMax}字`)
          this.commentNum_plus += 1
        }
      }
    })

    //將我的作品加入購物車
    document.body.addEventListener('click', (e) => {
      const target = event.target
      if (target.matches(`.addToCart`)) {
        // console.log("把我的作品加到購物車 " + allIndex)

        let cartList = JSON.parse(localStorage.getItem('cartsList')) || [];

        if (allIndex == '000023' || allIndex == '000032') {
          imgSrc = './assets/img/pic/model001.png'
        } else if (allIndex == '00401') {
          imgSrc = './assets/img/pic/model002.png'
        } else if (allIndex == '22234' || allIndex == '33234' || allIndex == '22243' | allIndex == '33243') {
          imgSrc = './assets/img/pic/model003.png'
        }

        let productArr = {
          name: typeWorkName,
          eName: `CUSTOMIZED PRODUCT`,
          series: "CU",
          seriesId: "01",
          imgURL: imgSrc,
          price: stage4Price,
          productNum: 1,
          totalPrice: stage4Price,
          points: 0,
          totalPointCost: 0
        }

        cartList.push(productArr)
        let cartJson = JSON.stringify(cartList)
        localStorage.setItem('cartsList', cartJson)

      }
    })

    //我的作品打開編輯框、編輯我的作品的作品敘述
    let count7 = 0;
    document.body.addEventListener('click', (e) => {
      const target = event.target
      if (target.matches(`.edit`)) {
        count7++

        if (count7 % 2 == 1) {
          $(e.target).parent().parent().parent().children('.userContent').css({
            "display": "none"
          })
          $(e.target).parent().parent().parent().children('.editTextArea').css({
            "display": "flex"
          })

          $(e.target).text('完成編輯')
        } else {
          let editContent = $(e.target).parent().parent().parent().children('.editTextArea').val()
          console.log(editContent)

          $(e.target).parent().parent().parent().children('.userContent').css({
            "display": "block"
          })
          $(e.target).parent().parent().parent().children('.userContent').text(editContent)
          $(e.target).parent().parent().parent().children('.editTextArea').css({
            "display": "none"
          })
          $(e.target).text('編輯')
        }
      }
    })

    //排序
    $('.filter').change(() => {
      let filterText = $('.filter').val();

      let mainPostTime = $('.mainTime').text().split('小時前');
      let mainTimeArr = mainPostTime.splice(0, mainPostTime.length - 1); //一個裝了字串的陣列
      // console.log(mainTimeArr)
      let newArr = []; //設一個空陣列，用來塞轉成數值後的時間

      for (let l = 0; l < mainTimeArr.length; l++) {
        newArr.push(parseInt(mainTimeArr[l])) //遍歷mainTimeArr內的字串，轉為數值然後塞到newArr
          // console.log(newArr)
          // console.log(newArr.indexOf(newArr[l]))
      }

      newArrSort = newArr.sort(function(n1, n2) {
        return n1 < n2 ? -1 : 1;
      });


      if (filterText == "按讚數多到少") {
        console.log('多到少')
        for (let i = 0; i < newArr.length; i++) {
          $(`.work`).eq(i).css({
            "order": "initial"
          })
        }

      } else if (filterText == "按作品新到舊") {
        // console.log('新到舊')
        for (let i = 0; i < newArr.length; i++) {
          // console.log(newArrSort)

          if (newArr[i] == 15) {
            // console.log(newArr[i])
            // console.log(i)
            $('.work:nth-child(1)').css({
              "order": i
            })
          } else if (newArr[i] == 26) {
            // console.log(i)
            $('.work:nth-child(6)').css({
              "order": i
            })
          } else if (newArr[i] == 7) {
            // console.log(i)
            $('.work:nth-child(4)').css({
              "order": i
            })
          } else if (newArr[i] == 4) {
            // console.log(i)
            $('.work:nth-child(3)').css({
              "order": i
            })
            $('.work:nth-child(5)').css({
              "order": i
            })
          } else if (newArr[i] == 1) {
            // console.log(i)
            $('.work:nth-child(2)').css({
              "order": i
            })
          }

          // if(newArrSort[i] == newArr[1]){  //4 i=1.2
          //     console.log(newArrSort[i]+", "+newArr[1]+ "i= "+i)
          //     $('.work:nth-child(3)').css({"order":i})
          //     $('.work:nth-child(5)').css({"order":i})
          // }else if(newArrSort[i] == newArr[2]){ //4 i=1
          //     // console.log('i: '+ i)
          //     $('.work:nth-child(3)').css({"order":i})
          // }else if(newArrSort[i] == newArr[4]){ //4 i=2
          //     $('.work:nth-child(5)').css({"order":i})
          // }else if(newArrSort[i] == newArr[3]){ //7 i=3
          //     // console.log('i: '+ i)
          //     $('.work:nth-child(4)').css({"order":i})
          // }else if(newArrSort[i] == newArr[0]){ //15 i=4
          //     // console.log('i: '+ i)
          //     $('.work:nth-child(1)').css({"order":i})
          // }else if(newArrSort[i] == newArr[5]){ //26 i=5
          //     // console.log('i: '+ i)
          //     $('.work:nth-child(6)').css({"order":i})
          // }
        }

      } else if (filterText == "按作品舊到新") {
        console.log('舊到新')

        for (let i = 0; i < newArr.length; i++) {
          // console.log(newArrSort)
          if (newArr[i] == 15) { //i=5
            // console.log(newArr[i])
            // console.log(i)
            $('.work:nth-child(1)').css({
              "order": 7 - i
            })
          } else if (newArr[i] == 26) { //i=6
            // console.log(i)
            $('.work:nth-child(6)').css({
              "order": 7 - i
            })
          } else if (newArr[i] == 7) { //i=4
            // console.log(i)
            $('.work:nth-child(4)').css({
              "order": 7 - i
            })
          } else if (newArr[i] == 4) { //i=3 or 2
            // console.log(i)
            $('.work:nth-child(3)').css({
              "order": 7 - i
            })
            $('.work:nth-child(5)').css({
              "order": 7 - i
            })
          } else if (newArr[i] == 1) { //i=1
            // console.log(i)
            $('.work:nth-child(2)').css({
              "order": 7 - i
            })
          }
        }
      }
    })

    // ---------------------------------計算金額------------------------------------------------
    $('.selectShape').click(function() {
      let totalPriceInit = $('.totalPrice').text().split(' ')[1]
        // console.log("totalPriceInit: " + totalPriceInit)

      let shapePrice = $(this).parent().children('.makeCar-price').text().split(' ')[1]
        // console.log(shapePrice);

      let finalPrice = $('.totalPrice').text().split(' ')[1]
      stage1Price = $('.totalPrice').text(`NT$ ${shapePrice}`)
      stage1Price2 = stage1Price.text().split(' ')[1] //設成全域，下一階段要用這個數
        // console.log('stage1: ' + stage1Price2)
    })

    $('.selectColor').click(function() {
      // console.log(stage1Price2)

      let colorPrice = $(this).parent().children('.makeCar-price').text().split(' ')[1]
        // console.log("colorPrice: " + colorPrice);

      stage2Price = parseInt(stage1Price2) + parseInt(colorPrice) //設成全域，下一階段要用這個數
        // console.log("stage2:" + stage2Price)

      stage2Price2 = $('.totalPrice').text(`NT$ ${stage2Price}`)
    })

    $('.selectTire').click(function() {
      // console.log(stage2Price)

      let tirePrice = $(this).parent().children('.makeCar-price').text().split(' ')[1]
        // console.log("tirePrice: " + tirePrice);

      state3Price = parseInt(stage2Price) + parseInt(tirePrice)
        // console.log("state3:" + state3Price)

      state3Price2 = $('.totalPrice').text(`NT$ ${state3Price}`)
    })


    //計算零件的金額
    $('.selectAccessory').click(function() {
        let state4Price0 = $('.totalPrice').text().split(' ')[1]
          // console.log(state4Price0)

        if ($(this).hasClass('btn--outline')) { //當從沒選零件變成有選零件的時候加錢
          let accessoryPrice = $(this).parent().children('.makeCar-price').text().split(' ')[1]
            // console.log("accessoryPrice: " + accessoryPrice);

          stage4Price = parseInt(state4Price0) + parseInt(accessoryPrice) //設成全域，之後要設成.putPrice的value
          console.log("stage4:" + stage4Price)

          let finalPrice = $('.totalPrice').text(`NT$ ${stage4Price}`)


        } else { //當從有選零件變成沒選零件時，扣掉原本加上去的錢
          let state4Price1 = $('.totalPrice').text().split(' ')[1]
          console.log(state4Price1)

          let accessoryPrice = $(this).parent().children('.makeCar-price').text().split(' ')[1]

          stage4Price = parseInt(state4Price1) - parseInt(accessoryPrice) //設成全域，之後要設成.putPrice的value
          console.log("stage4:" + stage4Price)

          let finalPrice = $('.totalPrice').text(`NT$ ${stage4Price}`)
        }
      })
      // -------------------------------------CANVAS--------------------------------------------
      //建立環境
    let canvas = document.querySelector('.canvas');
    let context = canvas.getContext('2d');

    let canvasA1 = document.querySelector('.canvasA1');
    let contextA1 = canvasA1.getContext('2d');

    let canvasA2 = document.querySelector('.canvasA2');
    let contextA2 = canvasA2.getContext('2d');

    let canvasA3 = document.querySelector('.canvasA3');
    let contextA3 = canvasA3.getContext('2d');

    //綁定事件
    $('.make').click(defaultShape)
    $('.selectShape').click(buildCanvas);

    function defaultShape() {
      let pic1 = new Image();
      pic1.src = `./assets/img/pic/shape01.png`; //放上預設車型
      pic1.addEventListener('load', function() {
        context.globalAlpha = 0.5;
        context.drawImage(pic1, 0, -100);
      })

      $('.bar-front').width(0) //將進度條歸0
      $('.circle').not(":first").removeClass('circle--active') //除了第一個circle以外其他都變無色
      $('.circle').not(":first").removeClass('circle--able') //除了第一個circle以外其他都變不能點
      countStep = 0;
    }

    function buildCanvas(e) {
      //先清空
      context.clearRect(0, 0, canvas.width, canvas.height);

      let targetShape = $(e.target).parent().children('.cardOut').children('.shape').attr('src');
      // console.log(targetShape)

      let pic1 = new Image();
      pic1.src = `${targetShape}`; //放上車型
      pic1.addEventListener('load', function() {
        context.globalAlpha = 1;
        context.drawImage(pic1, 0, -100);
      })
    }

    $('.selectShape').click((e) => {
      shapeIndex = $(e.target).parent().index()
      shapeIndex_str = $(e.target).parent().index().toString()
      console.log(shapeIndex)
        // console.log(shapeIndex_str)
    })

    $('.selectColor').click((e) => {
      colorIndex = shapeIndex_str + $(e.target).parent().index()
      console.log(colorIndex)
    })

    $('.selectTire').click((e) => {
      tireIndex = $(e.target).parent().index()
      console.log("tireIndex: " + tireIndex)
    })

    let accIndexArr = [];

    $('.selectWhite').click(function() {
      let pic2 = new Image();
      if (shapeIndex == 0) {
        pic2.src = './assets/img/pic/color1A.png'; //白
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 1) {
        pic2.src = './assets/img/pic/color1B.png'; //白
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 2 || shapeIndex == 3) {
        pic2.src = './assets/img/pic/color1C.png'; //白
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, -1, -117);
        })
      }
    })

    $('.selectRed').click(function() {
      let pic2 = new Image();
      if (shapeIndex == 0) {
        pic2.src = './assets/img/pic/color2A.png'; //紅
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 1) {
        pic2.src = './assets/img/pic/color2B.png'; //紅
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 2 || shapeIndex == 3) {
        pic2.src = './assets/img/pic/color2C.png'; //紅
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, -1, -117);
        })
      }
    })

    $('.selectOrange').click(function() {
      let pic2 = new Image();
      if (shapeIndex == 0) {
        pic2.src = './assets/img/pic/color3A.png'; //橙
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 1) {
        pic2.src = './assets/img/pic/color3B.png'; //橙
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 2 || shapeIndex == 3) {
        pic2.src = './assets/img/pic/color3C.png'; //橙
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, -1, -117);
        })
      }
    })

    $('.selectYellow').click(function() {
      let pic2 = new Image();

      if (shapeIndex == 0) {
        pic2.src = './assets/img/pic/color4A.png'; //黃
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 1) {
        pic2.src = './assets/img/pic/color4B.png'; //黃
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 2 || shapeIndex == 3) {
        pic2.src = './assets/img/pic/color4C.png'; //黃
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, -1, -117);
        })
      }
    })

    $('.selectPurple').click(function() {
      let pic2 = new Image();

      if (shapeIndex == 0) {
        pic2.src = './assets/img/pic/color5A.png'; //紫
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 1) {
        pic2.src = './assets/img/pic/color5B.png'; //紫
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, 0, -100);
        })
      } else if (shapeIndex == 2 || shapeIndex == 3) {
        pic2.src = './assets/img/pic/color5C.png'; //紫
        pic2.addEventListener('load', function() {
          context.globalAlpha = 1;
          context.drawImage(pic2, -1, -117);
        })
      }
    })

    //疊上輪子
    $('.selectT1').click(function() {
      let pic3 = new Image();
      pic3.src = './assets/img/pic/tire01.png'; //輪子1
      pic3.addEventListener('load', function() {
        context.globalAlpha = 1;
        context.drawImage(pic3, 0, -100);
      })
    })

    $('.selectT2').click(function() {
      let pic3 = new Image();
      pic3.src = './assets/img/pic/tire02.png'; //輪子2
      pic3.addEventListener('load', function() {
        context.globalAlpha = 1;
        context.drawImage(pic3, 0, -100);
      })
    })

    $('.selectT3').click(function() {
      let pic3 = new Image();
      pic3.src = './assets/img/pic/tire03.png'; //輪子3
      pic3.addEventListener('load', function() {
        context.globalAlpha = 1;
        context.drawImage(pic3, 0, -115);
      })
    })

    $('.selectT4').click(function() {
      let pic3 = new Image();
      pic3.src = './assets/img/pic/tire04B.png'; //輪子4
      pic3.addEventListener('load', function() {
        context.globalAlpha = 1;
        context.drawImage(pic3, 5, -105);
      })
    })

    //疊上配件
    let click1 = 0;
    let click2 = 0;
    let click3 = 0;
    let click4 = 0;
    let click5 = 0;
    let click6 = 0;

    $('.selectA1').click(function(e) {
      click1++;

      if (click1 % 2 == 1) {
        let pic4 = new Image();
        pic4.src = './assets/img/pic/accessory1.png'; //圓形燈飾

        pic4.addEventListener('load', function() {
          contextA1.globalAlpha = 1;
          contextA1.drawImage(pic4, 0, -120);
        })

        $(this).removeClass('btn--outline')
        $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

        let accessoryIndex = $(e.target).parent().index() //accessoryIndex = 0

        accIndexArr.push(accessoryIndex)
        console.log(accIndexArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      } else {
        contextA1.clearRect(0, 0, 400, 50); //把原本被選擇的配件清掉

        $(this).addClass('btn--outline')
        $(this).text('新增此配件')

        //here
        let accessoryIndex = $(e.target).parent().index()
        let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋0的index
        accIndexArr.splice(indexInArr, 1) //畫面上取消配件的同時，也把剛剛選的配件的index從accIndexArr刪掉
        console.log(accIndexArr)
        console.log(indexInArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      }
    })

    $('.selectA2').click(function(e) {
      click2++;

      if (click2 % 2 == 1) {
        let pic4 = new Image();
        pic4.src = './assets/img/pic/accessory2.png'; //藍燈飾
        pic4.addEventListener('load', function() {
          contextA2.globalAlpha = 1;
          contextA2.drawImage(pic4, 0, -120);
        })

        $(this).removeClass('btn--outline')
        $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

        let accessoryIndex = $(e.target).parent().index() //accessoryindex = 1

        accIndexArr.push(accessoryIndex)
        console.log(accIndexArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      } else {
        contextA2.clearRect(0, 0, 400, 50);

        $(this).addClass('btn--outline')
        $(this).text('新增此配件')

        let accessoryIndex = $(e.target).parent().index()
        let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋1的index
        accIndexArr.splice(indexInArr, 1)
        console.log(accIndexArr)
          // console.log(indexInArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      }
    })

    $('.selectA3').click(function(e) {
      click3++;

      if (click3 % 2 == 1) {
        let pic4 = new Image();
        pic4.src = './assets/img/pic/accessory3.png'; //紅藍燈飾
        pic4.addEventListener('load', function() {
          contextA3.globalAlpha = 1;
          contextA3.drawImage(pic4, 0, -120);
        })

        $(this).removeClass('btn--outline')
        $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

        let accessoryIndex = $(e.target).parent().index() //accessoryIndex = 2

        accIndexArr.push(accessoryIndex)
        console.log(accIndexArr)

        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }


      } else {
        contextA3.clearRect(0, 0, 400, 50);

        $(this).addClass('btn--outline')
        $(this).text('新增此配件')

        let accessoryIndex = $(e.target).parent().index()
        let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋2的index
        accIndexArr.splice(indexInArr, 1)
        console.log(accIndexArr)
          // console.log(indexInArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      }
    })

    $('.selectA4').click(function(e) {
      click4++;

      if (click4 % 2 == 1) {
        let pic4 = new Image();
        pic4.src = './assets/img/pic/accessory4.png'; //動物圖案
        pic4.addEventListener('load', function() {
          contextA1.globalAlpha = 1;
          contextA1.drawImage(pic4, 40, -100);
        })

        $(this).removeClass('btn--outline')
        $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

        let accessoryIndex = $(e.target).parent().index() //accessoryIndex = 3

        accIndexArr.push(accessoryIndex)
        console.log(accIndexArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      } else {
        contextA1.clearRect(0, 50, 400, 150);

        $(this).addClass('btn--outline')
        $(this).text('新增此配件')

        let accessoryIndex = $(e.target).parent().index()
        let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋3的index
        accIndexArr.splice(indexInArr, 1)
        console.log(accIndexArr)
          // console.log(indexInArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      }
    })

    $('.selectA5').click(function(e) {
      click5++;

      if (click5 % 2 == 1) {
        let pic4 = new Image();
        pic4.src = './assets/img/pic/accessory5.png'; //馬圖案
        pic4.addEventListener('load', function() {
          contextA2.globalAlpha = 1;
          contextA2.drawImage(pic4, 20, -100);
        })

        $(this).removeClass('btn--outline')
        $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

        let accessoryIndex = $(e.target).parent().index() //accessoryIndex = 4

        accIndexArr.push(accessoryIndex)
        console.log(accIndexArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      } else {
        contextA2.clearRect(0, 50, 400, 150);

        $(this).addClass('btn--outline')
        $(this).text('新增此配件')

        let accessoryIndex = $(e.target).parent().index()
        let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋4的index
        accIndexArr.splice(indexInArr, 1)
        console.log(accIndexArr)
          // console.log(indexInArr)


        if (accIndexArr.length == 1) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 2) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 3) {
          allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
          console.log("allIndex: " + allIndex)
        } else if (accIndexArr.length == 0) {
          allIndex = shapeIndex + colorIndex + tireIndex
          console.log("allIndex: " + allIndex)
        }
      }
    })

    $('.selectA6').click(function(e) {
        click6++;

        if (click6 % 2 == 1) {
          let pic4 = new Image();
          if (shapeIndex == 0) {
            // console.log('shapeIndex = 0')
            pic4.src = './assets/img/pic/accessory6.png'; //白尾翼
            pic4.addEventListener('load', function() {
              contextA3.globalAlpha = 1;
              contextA3.drawImage(pic4, 0, -100);
            })

            $(this).removeClass('btn--outline')
            $(this).text('取消此配件') //按了配件之後要變可以取消，字樣變取消配件

            let accessoryIndex = $(e.target).parent().index() //accessoryIndex = 5

            accIndexArr.push(accessoryIndex)
            console.log(accIndexArr)

            if (accIndexArr.length == 1) {
              allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
              console.log("allIndex: " + allIndex)
            } else if (accIndexArr.length == 2) {
              allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
              console.log("allIndex: " + allIndex)
            } else if (accIndexArr.length == 3) {
              allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
              console.log("allIndex: " + allIndex)
            } else if (accIndexArr.length == 0) {
              allIndex = shapeIndex + colorIndex + tireIndex
              console.log("allIndex: " + allIndex)
            }

          } else {
            $('.pleaseSelect').text('此車型不可搭配尾翼').css({
              "display": "block"
            })

            $(this).addClass('btn--outline')
            $('.nextStep').addClass('btn--disabled')

            setTimeout(function() {
              $('.pleaseSelect').css({
                "display": "none"
              })
            }, 1000);
          }
        } else {
          contextA3.clearRect(0, 50, 400, 150);

          $(this).addClass('btn--outline')
          $(this).text('新增此配件')

          //here2
          let accessoryIndex = $(e.target).parent().index()
          let indexInArr = accIndexArr.indexOf(accessoryIndex) //搜尋5的index
          accIndexArr.splice(indexInArr, 1)
          console.log(accIndexArr)
            // console.log(indexInArr)

          if (accIndexArr.length == 1) {
            allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0]
            console.log("allIndex: " + allIndex)
          } else if (accIndexArr.length == 2) {
            allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1]
            console.log("allIndex: " + allIndex)
          } else if (accIndexArr.length == 3) {
            allIndex = shapeIndex + colorIndex + tireIndex + accIndexArr[0] + accIndexArr[1] + accIndexArr[2]
            console.log("allIndex: " + allIndex)
          } else if (accIndexArr.length == 0) {
            allIndex = shapeIndex + colorIndex + tireIndex
            console.log("allIndex: " + allIndex)
          }
        }
      })
      //----------------------- 點圓圈進入、退到下一步驟 -----------------------
    $('.content:nth-child(1) .circle').click(() => {
      if (countStep % 5 == 1) {
        console.log('回去countStep=0')
        countStep--

        $('.pleaseSelect').text('請先選擇車款才能進入下一步喔')

        $('.colorCards').css({
          "display": "none"
        })
        $('.accessoryCard').css({
          "display": "none"
        })
        $('.shapeCards').css({
          "display": "flex"
        })
        $('.shapeCard').css({
          "display": "block"
        })

        //去除顏色，變不能點
        $('.content:nth-child(2) .circle').removeClass('circle--able')
        $('.content:nth-child(2) .circle').removeClass('circle--active')

        //進度條變短
        if (docW > 1003) {
          $('.bar-front').width(0)
        } else if (docW <= 1003) {
          $('.bar-front').width(0)
        }
      }
    })

    $('.content:nth-child(2) .circle').click(() => {
      if (countStep % 5 == 2) {
        console.log('回到countStep == 1')
        countStep--

        $('.tireCards').css({
          "display": "none"
        })
        $('.colorCards').css({
          "display": "flex"
        })
        $('.colorCard').css({
          "display": "block"
        })

        $('.content:nth-child(3) .circle').removeClass('circle--able')
        $('.content:nth-child(3) .circle').removeClass('circle--active')

        //進度條變短
        if (docW > 1003) {
          $('.bar-front').width(240)
        } else if (docW <= 1003) {
          $('.bar-front').width(220)
        }
      } else if (countStep % 5 == 0 && $('.nextStep').hasClass('btn--disabled')) {
        $('.pleaseSelect').css({
          "display": "block"
        })

        setTimeout(() => {
          $('.pleaseSelect').css({
            "display": "none"
          })
        }, 1000);
      } else if (countStep % 5 == 0 && !$('.nextStep').hasClass('btn--disabled')) {
        console.log('前進到countStep == 1')
        countStep++

        $('.nextStep').addClass('btn--disabled')

        $('.shapeCard').css({
            "display": "none"
          })
          //進入選顏色
        $('.colorCards').css({
          "display": "flex"
        })
        $('.colorCard').css({
            "display": "block"
          })
          //提醒內容變更
        $('.pleaseSelect').text('請先選擇烤漆才能進入下一步喔')
          //進度條、圓圈變色
        $('.content:nth-child(2) .circle').addClass('circle--able')
        $('.content:nth-child(2) .circle').addClass('circle--active')
        if (docW > 1003) {
          $('.bar-front').width(240)
        } else if (docW <= 1003) {
          $('.bar-front').width(220)
        }
      }
    })

    $('.content:nth-child(3) .circle').click(() => {
      if (countStep % 5 == 3) {
        console.log('回到countStep == 2')
        countStep--

        $('.accessoryCards').css({
          "display": "none"
        })
        $('.tirerCards').css({
          "display": "flex"
        })
        $('.tireCard').css({
          "display": "block"
        })

        $('.content:nth-child(4) .circle').removeClass('circle--able')
        $('.content:nth-child(4) .circle').removeClass('circle--active')

        //進度條變短
        if (docW > 1003) {
          $('.bar-front').width(480)
        } else if (docW <= 1003) {
          $('.bar-front').width(440)
        }

      } else if (countStep % 5 == 1 && $('.nextStep').hasClass('btn--disabled')) {
        $('.pleaseSelect').css({
          "display": "block"
        })

        setTimeout(() => {
          $('.pleaseSelect').css({
            "display": "none"
          })
        }, 1000);
      } else if (countStep % 5 == 1 && !$('.nextStep').hasClass('btn--disabled')) {
        console.log('前進到countStep == 2')
        countStep++

        $('.nextStep').addClass('btn--disabled')

        //進入選輪子
        $('.colorCard').css({
          "display": "none"
        })

        $('.tireCards').css({
          "display": "flex"
        })
        $('.tireCard').css({
          "display": "block"
        })

        //提醒內容變更
        $('.pleaseSelect').text('請先選擇輪胎才能進入下一步喔')

        //進度條、圓圈變色
        $('.content:nth-child(3) .circle').addClass('circle--able')
        $('.content:nth-child(3) .circle').addClass('circle--active')

        if (docW > 1003) {
          $('.bar-front').width(480)
        } else if (docW <= 1003) {
          $('.bar-front').width(440)
        }
      }
    })

    $('.content:nth-child(4) .circle').click(() => {
      if (countStep % 5 == 4) {
        console.log('回到countStep == 3')
        countStep--

        $('.giveName').css({
          "display": "none"
        });
        $('.selectArea').css({
          "display": "flex"
        });
        $('.accessoryCards').css({
          "display": "flex"
        })
        $('.accessoryCard').css({
          "display": "block"
        })

        $('.content:nth-child(5) .circle').removeClass('circle--able')
        $('.content:nth-child(5) .circle').removeClass('circle--active')

        //進度條變短
        if (docW > 1003) {
          $('.bar-front').width(730)
        } else if (docW <= 1003) {
          $('.bar-front').width(660)
        }

      } else if (countStep % 5 == 2 && $('.nextStep').hasClass('btn--disabled')) {
        $('.pleaseSelect').css({
          "display": "block"
        })

        setTimeout(() => {
          $('.pleaseSelect').css({
            "display": "none"
          })
        }, 1000);
      } else if (countStep % 5 == 2 && !$('.nextStep').hasClass('btn--disabled')) {
        console.log('前進到countStep == 3')
        countStep++

        if (shapeIndex != 0) {
          console.log('讓尾翼不能選')
          $('.selectA6').addClass('btn--disabled')
          $('.selectA6').removeClass('btn--outline')
          $('.selectA6').css({
            "pointer-events": "none"
          })
        }

        $('.nextStep').addClass('btn--disabled')

        //進入選配件
        $('.tireCard').css({
          "display": "none"
        })

        //提醒內容變更
        $('.pleaseSelect').text('請先選擇配件才能進入下一步喔')
        $('.accessoryCards').css({
          "display": "flex"
        })
        $('.accessoryCard').css({
          "display": "block"
        })

        //進度條、圓圈變色
        $('.content:nth-child(4) .circle').addClass('circle--able')
        $('.content:nth-child(4) .circle').addClass('circle--active')

        if (docW > 1003) {
          $('.bar-front').width(730)
        } else if (docW <= 1003) {
          $('.bar-front').width(660)
        }
      }
    })

    $('.content:nth-child(5) .circle').click(() => {
        if (countStep % 5 == 3 && $('.nextStep').hasClass('btn--disabled')) {
          $('.pleaseSelect').css({
            "display": "block"
          })

          setTimeout(() => {
            $('.pleaseSelect').css({
              "display": "none"
            })
          }, 1000);
        } else if (countStep % 5 == 3 && !$('.nextStep').hasClass('btn--disabled')) {
          console.log('前進到countStep == 4')
          countStep++

          $('.nextStep').addClass('btn--disabled').text('完成')
          $('.nextStep').addClass('finish')

          $('.selectArea').css({
            "display": "none"
          })

          $('.giveName').css({
            "display": "flex",
            "justify-content": "space-between"
          })

          //左右紐消失
          $('.selectBtn').css({
            "display": "none"
          })

          //提醒內容變更
          $('.pleaseSelect').text('請先填寫完資料才能完成作品喔')

          //進度條、圓圈變色
          $('.content:nth-child(5) .circle').addClass('circle--able')
          $('.content:nth-child(5) .circle').addClass('circle--active')

          if (docW > 1003) {
            $('.bar-front').width(960)
          } else if (docW <= 1003) {
            $('.bar-front').width(840)
          }
        }
      })
      // --------------------------------------AJAX-------------------------------------doc
    $('.nextStep').click((e) => {
      if ($(e.target).hasClass('finish') && countStep % 5 == 0) {
        let workName = $('.typeWorkName').attr('value')
        let userNickName = $('.typeNickName').attr('value')
        let inspiration = $('.typeInspiration').attr('value')
        let workPostTime = $('.putDataId').attr('value')
        let workPrice = $('.putPrice').attr('value')
        let allIndex = $('.putAllIndex').attr('value')
        let imgPath = $('.putImgPath').attr('value')
        let memberId = $('.putMemberId').attr('value')


        $.ajax({
          method: "POST",
          url: "./assets/php/getCustomizeProduct.php", //向後台請求的資料，用的是PHP
          data: {
            "workName": workName,
            "userNickName": userNickName,
            "inspiration": inspiration,
            "workPostTime": workPostTime,
            "workPrice": workPrice,
            "allIndex": allIndex,
            "imgPath": imgPath,
            "memberId": memberId,

          },
          success: function(result) {
            // alert('OK')
          },
          error: function(exception) {
            alert("發生錯誤: " + exception.status);
          }
        });
      }
    })

    // $('.work_pic').click(()=>{
    //   $('.mask').css({"positon":"initial"})
    //   $(document).scroll(()=>{
    //   let toButtom = $(document).height() - $(window).height() - $(window).scrollTop();
    //   console.log(toButtom)

    //   if(toButtom < 5410){
    //     // $('.mask').css({"overflowY": "hidden"})
    //     console.log('5410')
    //   }
    //   })
    // })

  </script>
</body>

</html>